"use strict";(self.webpackChunkattendenceFrontEnd=self.webpackChunkattendenceFrontEnd||[]).push([[873],{9897:(Ve,se,O)=>{O.d(se,{w:()=>Me});var g=O(7882),l=O(2711),b=O(4354);class F extends l.be{constructor(){super(...arguments),this.headerElRef=(0,b.Vf)()}renderSimpleLayout(e,s){let{props:o,context:a}=this,h=[],d=(0,l.cc)(a.options);return e&&h.push({type:"header",key:"header",isSticky:d,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),h.push({type:"body",key:"body",liquid:!0,chunk:{content:s}}),(0,b.az)(l.ct,{elClasses:["fc-daygrid"],viewSpec:a.viewSpec},(0,b.az)(l.b$,{liquid:!o.isHeightAuto&&!o.forPrint,collapsibleWidth:o.forPrint,cols:[],sections:h}))}renderHScrollLayout(e,s,o,a){let h=this.context.pluginHooks.scrollGridImpl;if(!h)throw new Error("No ScrollGrid implementation");let{props:d,context:u}=this,p=!d.forPrint&&(0,l.cc)(u.options),y=!d.forPrint&&(0,l.cb)(u.options),v=[];return e&&v.push({type:"header",key:"header",isSticky:p,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),v.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:s}]}),y&&v.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:l.ca}]}),(0,b.az)(l.ct,{elClasses:["fc-daygrid"],viewSpec:u.viewSpec},(0,b.az)(h,{liquid:!d.isHeightAuto&&!d.forPrint,forPrint:d.forPrint,collapsibleWidth:d.forPrint,colGroups:[{cols:[{span:o,minWidth:a}]}],sections:v}))}}function L(f,e){let s=[];for(let o=0;o<e;o+=1)s[o]=[];for(let o of f)s[o.row].push(o);return s}function K(f,e){let s=[];for(let o=0;o<e;o+=1)s[o]=[];for(let o of f)s[o.firstCol].push(o);return s}function B(f,e){let s=[];if(f){for(let o=0;o<e;o+=1)s[o]={affectedInstances:f.affectedInstances,isEvent:f.isEvent,segs:[]};for(let o of f.segs)s[o.row].segs.push(o)}else for(let o=0;o<e;o+=1)s[o]=null;return s}const z=(0,l.x)({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function Y(f){let{display:e}=f.eventRange.ui;return"list-item"===e||"auto"===e&&!f.eventRange.def.allDay&&f.firstCol===f.lastCol&&f.isStart&&f.isEnd}class ne extends l.B{render(){let{props:e}=this;return(0,b.az)(l.cj,Object.assign({},e,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:z,defaultDisplayEventEnd:e.defaultDisplayEventEnd,disableResizing:!e.seg.eventRange.def.allDay}))}}class te extends l.B{render(){let{props:e,context:s}=this,{options:o}=s,{seg:a}=e,d=(0,l.bQ)(a,o.eventTimeFormat||z,s,!0,e.defaultDisplayEventEnd);return(0,b.az)(l.cn,Object.assign({},e,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:(0,l.bU)(e.seg,s),defaultGenerator:Ee,timeText:d,isResizing:!1,isDateSelecting:!1}))}}function Ee(f){return(0,b.az)(b.HY,null,(0,b.az)("div",{className:"fc-daygrid-event-dot",style:{borderColor:f.borderColor||f.backgroundColor}}),f.timeText&&(0,b.az)("div",{className:"fc-event-time"},f.timeText),(0,b.az)("div",{className:"fc-event-title"},f.event.title||(0,b.az)(b.HY,null,"\xa0")))}class X extends l.B{constructor(){super(...arguments),this.compileSegs=(0,l.z)($)}render(){let{props:e}=this,{allSegs:s,invisibleSegs:o}=this.compileSegs(e.singlePlacements);return(0,b.az)(l.cr,{elClasses:["fc-daygrid-more-link"],dateProfile:e.dateProfile,todayRange:e.todayRange,allDayDate:e.allDayDate,moreCnt:e.moreCnt,allSegs:s,hiddenSegs:o,alignmentElRef:e.alignmentElRef,alignGridTop:e.alignGridTop,extraDateSpan:e.extraDateSpan,popoverContent:()=>{let a=(e.eventDrag?e.eventDrag.affectedInstances:null)||(e.eventResize?e.eventResize.affectedInstances:null)||{};return(0,b.az)(b.HY,null,s.map(h=>{let d=h.eventRange.instance.instanceId;return(0,b.az)("div",{className:"fc-daygrid-event-harness",key:d,style:{visibility:a[d]?"hidden":""}},Y(h)?(0,b.az)(te,Object.assign({seg:h,isDragging:!1,isSelected:d===e.eventSelection,defaultDisplayEventEnd:!1},(0,l.bS)(h,e.todayRange))):(0,b.az)(ne,Object.assign({seg:h,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:d===e.eventSelection,defaultDisplayEventEnd:!1},(0,l.bS)(h,e.todayRange))))}))}})}}function $(f){let e=[],s=[];for(let o of f)e.push(o.seg),o.isVisible||s.push(o.seg);return{allSegs:e,invisibleSegs:s}}const Ie=(0,l.x)({week:"narrow"});class A extends l.be{constructor(){super(...arguments),this.rootElRef=(0,b.Vf)(),this.state={dayNumberId:(0,l.a5)()},this.handleRootEl=e=>{(0,l.Y)(this.rootElRef,e),(0,l.Y)(this.props.elRef,e)}}render(){let{context:e,props:s,state:o,rootElRef:a}=this,{options:h,dateEnv:d}=e,{date:u,dateProfile:p}=s;const y=s.showDayNumber&&function R(f,e,s){const{start:o,end:a}=e,h=(0,l.bg)(a,-1),d=s.getYear(o),u=s.getMonth(o),p=s.getYear(h),y=s.getMonth(h);return!(d===p&&u===y)&&(f.valueOf()===o.valueOf()||1===s.getDay(f)&&f.valueOf()<a.valueOf())}(u,p.currentRange,d);return(0,b.az)(l.cl,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...s.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},s.extraDataAttrs),s.showDayNumber?{"aria-labelledby":o.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:q,date:u,dateProfile:p,todayRange:s.todayRange,showDayNumber:s.showDayNumber,isMonthStart:y,extraRenderProps:s.extraRenderProps},(v,S)=>(0,b.az)("div",{ref:s.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:s.minHeight}},s.showWeekNumber&&(0,b.az)(l.cq,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:(0,l.b0)(e,u,"week"),date:u,defaultFormat:Ie}),!S.isDisabled&&(s.showDayNumber||(0,l.cm)(h)||s.forceDayTop)?(0,b.az)("div",{className:"fc-daygrid-day-top"},(0,b.az)(v,{elTag:"a",elClasses:["fc-daygrid-day-number",y&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},(0,l.b0)(e,u)),{id:o.dayNumberId})})):s.showDayNumber?(0,b.az)("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},(0,b.az)("a",{className:"fc-daygrid-day-number"},"\xa0")):void 0,(0,b.az)("div",{className:"fc-daygrid-day-events",ref:s.fgContentElRef},s.fgContent,(0,b.az)("div",{className:"fc-daygrid-day-bottom",style:{marginTop:s.moreMarginTop}},(0,b.az)(X,{allDayDate:u,singlePlacements:s.singlePlacements,moreCnt:s.moreCnt,alignmentElRef:a,alignGridTop:!s.showDayNumber,extraDateSpan:s.extraDateSpan,dateProfile:s.dateProfile,eventSelection:s.eventSelection,eventDrag:s.eventDrag,eventResize:s.eventResize,todayRange:s.todayRange}))),(0,b.az)("div",{className:"fc-daygrid-day-bg"},s.bgContent)))}}function q(f){return f.dayNumberText||(0,b.az)(b.HY,null,"\xa0")}function I(f){return f.eventRange.instance.instanceId+":"+f.firstCol}function w(f){return I(f)+":"+f.lastCol}function W(f,e,s,o){if(f.firstCol===e&&f.lastCol===s-1)return f;let a=f.eventRange,h=a.range,d=(0,l.o)(h,{start:o[e].date,end:(0,l.t)(o[s-1].date,1)});return Object.assign(Object.assign({},f),{firstCol:e,lastCol:s-1,eventRange:{def:a.def,ui:Object.assign(Object.assign({},a.ui),{durationEditable:!1}),instance:a.instance,range:d},isStart:f.isStart&&d.start.valueOf()===h.start.valueOf(),isEnd:f.isEnd&&d.end.valueOf()===h.end.valueOf()})}class G extends l.bA{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(e){const s=super.addSegs(e),{entriesByLevel:o}=this,a=h=>!this.forceHidden[(0,l.bB)(h)];for(let h=0;h<o.length;h+=1)o[h]=o[h].filter(a);return s}handleInvalidInsertion(e,s,o){const{entriesByLevel:a,forceHidden:h}=this,{touchingEntry:d,touchingLevel:u,touchingLateral:p}=e;if(this.hiddenConsumes&&d){const y=(0,l.bB)(d);if(!h[y])if(this.allowReslicing){const v=Object.assign(Object.assign({},d),{span:(0,l.bF)(d.span,s.span)});h[(0,l.bB)(v)]=!0,a[u][p]=v,o.push(v),this.splitEntry(d,s,o)}else h[y]=!0,o.push(d)}super.handleInvalidInsertion(e,s,o)}}class j extends l.be{constructor(){super(...arguments),this.cellElRefs=new l.cf,this.frameElRefs=new l.cf,this.fgElRefs=new l.cf,this.segHarnessRefs=new l.cf,this.rootElRef=(0,b.Vf)(),this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=e=>{e&&this.updateSizing(!0)}}render(){let{props:e,state:s,context:o}=this,{options:a}=o,h=e.cells.length,d=K(e.businessHourSegs,h),u=K(e.bgEventSegs,h),p=K(this.getHighlightSegs(),h),y=K(this.getMirrorSegs(),h),{singleColPlacements:v,multiColPlacements:S,moreCnts:D,moreMarginTops:E}=function J(f,e,s,o,a,h,d){let u=new G(_=>a[f[_.index].eventRange.instance.instanceId+":"+_.span.start+":"+(_.span.end-1)]||1);u.allowReslicing=!0,u.strictOrder=o,!0===e||!0===s?(u.maxCoord=h,u.hiddenConsumes=!0):"number"==typeof e?u.maxStackCnt=e:"number"==typeof s&&(u.maxStackCnt=s,u.hiddenConsumes=!0);let p=[],y=[];for(let _=0;_<f.length;_+=1){let n=f[_],t=w(n);null!=a[t]?p.push({index:_,span:{start:n.firstCol,end:n.lastCol+1}}):y.push(n)}let v=u.addSegs(p),S=u.toRects(),{singleColPlacements:D,multiColPlacements:E,leftoverMargins:k}=function re(f,e,s){let o=function oe(f,e){let s=[];for(let o=0;o<e;o+=1)s.push([]);for(let o of f)for(let a=o.span.start;a<o.span.end;a+=1)s[a].push(o);return s}(f,s.length),a=[],h=[],d=[];for(let u=0;u<s.length;u+=1){let p=o[u],y=[],v=0,S=0;for(let E of p)y.push({seg:W(e[E.index],u,u+1,s),isVisible:!0,isAbsolute:!1,absoluteTop:E.levelCoord,marginTop:E.levelCoord-v}),v=E.levelCoord+E.thickness;let D=[];v=0,S=0;for(let E of p){let k=e[E.index],x=E.span.start===u;S+=E.levelCoord-v,v=E.levelCoord+E.thickness,E.span.end-E.span.start>1?(S+=E.thickness,x&&D.push({seg:W(k,E.span.start,E.span.end,s),isVisible:!0,isAbsolute:!0,absoluteTop:E.levelCoord,marginTop:0})):x&&(D.push({seg:W(k,E.span.start,E.span.end,s),isVisible:!0,isAbsolute:!1,absoluteTop:E.levelCoord,marginTop:S}),S=0)}a.push(y),h.push(D),d.push(S)}return{singleColPlacements:a,multiColPlacements:h,leftoverMargins:d}}(S,f,d),T=[],x=[];for(let _ of y){E[_.firstCol].push({seg:_,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let n=_.firstCol;n<=_.lastCol;n+=1)D[n].push({seg:W(_,n,n+1,d),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let _=0;_<d.length;_+=1)T.push(0);for(let _ of v){let n=f[_.index],t=_.span;E[t.start].push({seg:W(n,t.start,t.end,d),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let i=t.start;i<t.end;i+=1)T[i]+=1,D[i].push({seg:W(n,i,i+1,d),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let _=0;_<d.length;_+=1)x.push(k[_]);return{singleColPlacements:D,multiColPlacements:E,moreCnts:T,moreMarginTops:x}}((0,l.bR)(e.fgEventSegs,a.eventOrder),e.dayMaxEvents,e.dayMaxEventRows,a.eventOrderStrict,s.segHeights,s.maxContentHeight,e.cells),k=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{};return(0,b.az)("tr",{ref:this.rootElRef,role:"row"},e.renderIntro&&e.renderIntro(),e.cells.map((T,x)=>{let _=this.renderFgSegs(x,e.forPrint?v[x]:S[x],e.todayRange,k),n=this.renderFgSegs(x,function V(f,e){if(!f.length)return[];let s=function ae(f){let e={};for(let s of f)for(let o of s)e[o.seg.eventRange.instance.instanceId]=o.absoluteTop;return e}(e);return f.map(o=>({seg:o,isVisible:!0,isAbsolute:!0,absoluteTop:s[o.eventRange.instance.instanceId],marginTop:0}))}(y[x],S),e.todayRange,{},!!e.eventDrag,!!e.eventResize,!1);return(0,b.az)(A,{key:T.key,elRef:this.cellElRefs.createRef(T.key),innerElRef:this.frameElRefs.createRef(T.key),dateProfile:e.dateProfile,date:T.date,showDayNumber:e.showDayNumbers,showWeekNumber:e.showWeekNumbers&&0===x,forceDayTop:e.showWeekNumbers,todayRange:e.todayRange,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,extraRenderProps:T.extraRenderProps,extraDataAttrs:T.extraDataAttrs,extraClassNames:T.extraClassNames,extraDateSpan:T.extraDateSpan,moreCnt:D[x],moreMarginTop:E[x],singlePlacements:v[x],fgContentElRef:this.fgElRefs.createRef(T.key),fgContent:(0,b.az)(b.HY,null,(0,b.az)(b.HY,null,_),(0,b.az)(b.HY,null,n)),bgContent:(0,b.az)(b.HY,null,this.renderFillSegs(p[x],"highlight"),this.renderFillSegs(d[x],"non-business"),this.renderFillSegs(u[x],"bg-event")),minHeight:e.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(e,s){this.updateSizing(!(0,l.E)(e,this.props))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:e}=this;return e.eventDrag&&e.eventDrag.segs.length?e.eventDrag.segs:e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:e.dateSelectionSegs}getMirrorSegs(){let{props:e}=this;return e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:[]}renderFgSegs(e,s,o,a,h,d,u){let{context:p}=this,{eventSelection:y}=this.props,{framePositions:v}=this.state,S=1===this.props.cells.length,D=h||d||u,E=[];if(v)for(let k of s){let{seg:T}=k,{instanceId:x}=T.eventRange.instance,_=k.isVisible&&!a[x],n=k.isAbsolute,t="",i="";n&&(p.isRtl?(i=0,t=v.lefts[T.lastCol]-v.lefts[T.firstCol]):(t=0,i=v.rights[T.firstCol]-v.rights[T.lastCol])),E.push((0,b.az)("div",{className:"fc-daygrid-event-harness"+(n?" fc-daygrid-event-harness-abs":""),key:I(T),ref:D?null:this.segHarnessRefs.createRef(w(T)),style:{visibility:_?"":"hidden",marginTop:n?"":k.marginTop,top:n?k.absoluteTop:"",left:t,right:i}},Y(T)?(0,b.az)(te,Object.assign({seg:T,isDragging:h,isSelected:x===y,defaultDisplayEventEnd:S},(0,l.bS)(T,o))):(0,b.az)(ne,Object.assign({seg:T,isDragging:h,isResizing:d,isDateSelecting:u,isSelected:x===y,defaultDisplayEventEnd:S},(0,l.bS)(T,o)))))}return E}renderFillSegs(e,s){let{isRtl:o}=this.context,{todayRange:a}=this.props,{framePositions:h}=this.state,d=[];if(h)for(let u of e){let p=o?{right:0,left:h.lefts[u.lastCol]-h.lefts[u.firstCol]}:{left:0,right:h.rights[u.firstCol]-h.rights[u.lastCol]};d.push((0,b.az)("div",{key:(0,l.bT)(u.eventRange),className:"fc-daygrid-bg-harness",style:p},"bg-event"===s?(0,b.az)(l.cp,Object.assign({seg:u},(0,l.bS)(u,a))):(0,l.co)(s)))}return(0,b.az)(b.HY,{},...d)}updateSizing(e){let{props:s,state:o,frameElRefs:a}=this;if(!s.forPrint&&null!==s.clientWidth){if(e){let p=s.cells.map(y=>a.currentMap[y.key]);if(p.length){let y=this.rootElRef.current,v=new l.ba(y,p,!0,!1);(!o.framePositions||!o.framePositions.similarTo(v))&&this.setState({framePositions:new l.ba(y,p,!0,!1)})}}const h=this.state.segHeights,d=this.querySegHeights(),u=!0===s.dayMaxEvents||!0===s.dayMaxEventRows;this.safeSetState({segHeights:Object.assign(Object.assign({},h),d),maxContentHeight:u?this.computeMaxContentHeight():null})}}querySegHeights(){let e=this.segHarnessRefs.currentMap,s={};for(let o in e){let a=Math.round(e[o].getBoundingClientRect().height);s[o]=Math.max(s[o]||0,a)}return s}computeMaxContentHeight(){let e=this.props.cells[0].key,o=this.fgElRefs.currentMap[e];return this.cellElRefs.currentMap[e].getBoundingClientRect().bottom-o.getBoundingClientRect().top}getCellEls(){let e=this.cellElRefs.currentMap;return this.props.cells.map(s=>e[s.key])}}j.addStateEquality({segHeights:l.E});class le extends l.be{constructor(){super(...arguments),this.splitBusinessHourSegs=(0,l.z)(L),this.splitBgEventSegs=(0,l.z)(L),this.splitFgEventSegs=(0,l.z)(L),this.splitDateSelectionSegs=(0,l.z)(L),this.splitEventDrag=(0,l.z)(B),this.splitEventResize=(0,l.z)(B),this.rowRefs=new l.cf}render(){let{props:e,context:s}=this,o=e.cells.length,a=this.splitBusinessHourSegs(e.businessHourSegs,o),h=this.splitBgEventSegs(e.bgEventSegs,o),d=this.splitFgEventSegs(e.fgEventSegs,o),u=this.splitDateSelectionSegs(e.dateSelectionSegs,o),p=this.splitEventDrag(e.eventDrag,o),y=this.splitEventResize(e.eventResize,o),v=o>=7&&e.clientWidth?e.clientWidth/s.options.aspectRatio/6:null;return(0,b.az)(l.ch,{unit:"day"},(S,D)=>(0,b.az)(b.HY,null,e.cells.map((E,k)=>(0,b.az)(j,{ref:this.rowRefs.createRef(k),key:E.length?E[0].date.toISOString():k,showDayNumbers:o>1,showWeekNumbers:e.showWeekNumbers,todayRange:D,dateProfile:e.dateProfile,cells:E,renderIntro:e.renderRowIntro,businessHourSegs:a[k],eventSelection:e.eventSelection,bgEventSegs:h[k].filter(N),fgEventSegs:d[k],dateSelectionSegs:u[k],eventDrag:p[k],eventResize:y[k],dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,clientWidth:e.clientWidth,clientHeight:e.clientHeight,cellMinHeight:v,forPrint:e.forPrint}))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){const e=this.rowRefs.currentMap[0].getCellEls()[0],s=e?e.closest(".fc-daygrid-body"):null;s&&(this.rootEl=s,this.context.registerInteractiveComponent(this,{el:s,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new l.ba(this.rootEl,this.rowRefs.collect().map(e=>e.getCellEls()[0]),!1,!0),this.colPositions=new l.ba(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(e,s){let{colPositions:o,rowPositions:a}=this,h=o.leftToIndex(e),d=a.topToIndex(s);if(null!=d&&null!=h){let u=this.props.cells[d][h];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(d,h),allDay:!0},u.extraDateSpan),dayEl:this.getCellEl(d,h),rect:{left:o.lefts[h],right:o.rights[h],top:a.tops[d],bottom:a.bottoms[d]},layer:0}}return null}getCellEl(e,s){return this.rowRefs.currentMap[e].getCellEls()[s]}getCellRange(e,s){let o=this.props.cells[e][s].date;return{start:o,end:(0,l.t)(o,1)}}}function N(f){return f.eventRange.def.allDay}class Se extends l.be{constructor(){super(...arguments),this.elRef=(0,b.Vf)(),this.needsScrollReset=!1}render(){let{props:e}=this,{dayMaxEventRows:s,dayMaxEvents:o,expandRows:a}=e,h=!0===o||!0===s;return h&&!a&&(h=!1,s=null,o=null),(0,b.az)("div",{ref:this.elRef,className:["fc-daygrid-body",h?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",a?"":"fc-daygrid-body-natural"].join(" "),style:{width:e.clientWidth,minWidth:e.tableMinWidth}},(0,b.az)("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:e.clientWidth,minWidth:e.tableMinWidth,height:a?e.clientHeight:""}},e.colGroupNode,(0,b.az)("tbody",{role:"presentation"},(0,b.az)(le,{dateProfile:e.dateProfile,cells:e.cells,renderRowIntro:e.renderRowIntro,showWeekNumbers:e.showWeekNumbers,clientWidth:e.clientWidth,clientHeight:e.clientHeight,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,dayMaxEvents:o,dayMaxEventRows:s,forPrint:e.forPrint,isHitComboAllowed:e.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(e){e.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const e=function U(f,e){let s;return e.currentRangeUnit.match(/year|month/)&&(s=f.querySelector(`[data-date="${(0,l.bx)(e.currentDate)}-01"]`)),s||(s=f.querySelector(`[data-date="${(0,l.bv)(e.currentDate)}"]`)),s}(this.elRef.current,this.props.dateProfile);if(e){const s=e.closest(".fc-daygrid-body"),o=s.closest(".fc-scroller"),a=e.getBoundingClientRect().top-s.getBoundingClientRect().top;o.scrollTop=a?a+1:0}this.needsScrollReset=!1}}}class Pe extends l.bW{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(e,s){return s.sliceRange(e)}}class We extends l.be{constructor(){super(...arguments),this.slicer=new Pe,this.tableRef=(0,b.Vf)()}render(){let{props:e,context:s}=this;return(0,b.az)(Se,Object.assign({ref:this.tableRef},this.slicer.sliceProps(e,e.dateProfile,e.nextDayThreshold,s,e.dayTableModel),{dateProfile:e.dateProfile,cells:e.dayTableModel.cells,colGroupNode:e.colGroupNode,tableMinWidth:e.tableMinWidth,renderRowIntro:e.renderRowIntro,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.showWeekNumbers,expandRows:e.expandRows,headerAlignElRef:e.headerAlignElRef,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:e.forPrint}))}}function ue(f,e){let s=new l.bO(f.renderRange,e);return new l.bV(s,/year|month|week/.test(f.currentRangeUnit))}(0,l.cw)(':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}');var Ze=(0,g.rx)({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:class Fe extends F{constructor(){super(...arguments),this.buildDayTableModel=(0,l.z)(ue),this.headerRef=(0,b.Vf)(),this.tableRef=(0,b.Vf)()}render(){let{options:e,dateProfileGenerator:s}=this.context,{props:o}=this,a=this.buildDayTableModel(o.dateProfile,s),h=e.dayHeaders&&(0,b.az)(l.bK,{ref:this.headerRef,dateProfile:o.dateProfile,dates:a.headerDates,datesRepDistinctDays:1===a.rowCnt}),d=u=>(0,b.az)(We,{ref:this.tableRef,dateProfile:o.dateProfile,dayTableModel:a,businessHours:o.businessHours,dateSelection:o.dateSelection,eventStore:o.eventStore,eventUiBases:o.eventUiBases,eventSelection:o.eventSelection,eventDrag:o.eventDrag,eventResize:o.eventResize,nextDayThreshold:e.nextDayThreshold,colGroupNode:u.tableColGroupNode,tableMinWidth:u.tableMinWidth,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.weekNumbers,expandRows:!o.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:u.clientWidth,clientHeight:u.clientHeight,forPrint:o.forPrint});return e.dayMinWidth?this.renderHScrollLayout(h,d,a.colCnt,e.dayMinWidth):this.renderSimpleLayout(h,d)}},dateProfileGeneratorClass:class Ye extends l.U{buildRenderRange(e,s,o){let a=super.buildRenderRange(e,s,o),{props:h}=this;return function Xe(f){let h,{dateEnv:e,currentRange:s}=f,{start:o,end:a}=s;if(f.snapToWeek&&(o=e.startOfWeek(o),h=e.startOfWeek(a),h.valueOf()!==a.valueOf()&&(a=(0,l.bh)(h,1))),f.fixedWeekCount){let d=e.startOfWeek(e.startOfMonth((0,l.t)(s.end,-1))),u=Math.ceil((0,l.bi)(d,a));a=(0,l.bh)(a,6-u)}return{start:o,end:a}}({currentRange:a,snapToWeek:/^(year|month)$/.test(s),fixedWeekCount:h.fixedWeekCount,dateEnv:h.dateEnv})}}},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}});l.bI.touchMouseIgnoreWait=500;let we=0,fe=0,ce=!1;class ge{constructor(e){this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=s=>{if(!this.shouldIgnoreMouse()&&function pe(f){return 0===f.button&&!f.ctrlKey}(s)&&this.tryStart(s)){let o=this.createEventFromMouse(s,!0);this.emitter.trigger("pointerdown",o),this.initScrollWatch(o),this.shouldIgnoreMove||document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},this.handleMouseMove=s=>{let o=this.createEventFromMouse(s);this.recordCoords(o),this.emitter.trigger("pointermove",o)},this.handleMouseUp=s=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.emitter.trigger("pointerup",this.createEventFromMouse(s)),this.cleanup()},this.handleTouchStart=s=>{if(this.tryStart(s)){this.isTouchDragging=!0;let o=this.createEventFromTouch(s,!0);this.emitter.trigger("pointerdown",o),this.initScrollWatch(o);let a=s.target;this.shouldIgnoreMove||a.addEventListener("touchmove",this.handleTouchMove),a.addEventListener("touchend",this.handleTouchEnd),a.addEventListener("touchcancel",this.handleTouchEnd),window.addEventListener("scroll",this.handleTouchScroll,!0)}},this.handleTouchMove=s=>{let o=this.createEventFromTouch(s);this.recordCoords(o),this.emitter.trigger("pointermove",o)},this.handleTouchEnd=s=>{if(this.isDragging){let o=s.target;o.removeEventListener("touchmove",this.handleTouchMove),o.removeEventListener("touchend",this.handleTouchEnd),o.removeEventListener("touchcancel",this.handleTouchEnd),window.removeEventListener("scroll",this.handleTouchScroll,!0),this.emitter.trigger("pointerup",this.createEventFromTouch(s)),this.cleanup(),this.isTouchDragging=!1,function Oe(){we+=1,setTimeout(()=>{we-=1},l.bI.touchMouseIgnoreWait)}()}},this.handleTouchScroll=()=>{this.wasTouchScroll=!0},this.handleScroll=s=>{if(!this.shouldIgnoreMove){let o=window.scrollX-this.prevScrollX+this.prevPageX,a=window.scrollY-this.prevScrollY+this.prevPageY;this.emitter.trigger("pointermove",{origEvent:s,isTouch:this.isTouchDragging,subjectEl:this.subjectEl,pageX:o,pageY:a,deltaX:o-this.origPageX,deltaY:a-this.origPageY})}},this.containerEl=e,this.emitter=new l.F,e.addEventListener("mousedown",this.handleMouseDown),e.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),function Ne(){fe+=1,1===fe&&window.addEventListener("touchmove",De,{passive:!1})}()}destroy(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),function Z(){fe-=1,fe||window.removeEventListener("touchmove",De,{passive:!1})}()}tryStart(e){let s=this.querySubjectEl(e);return!(!s||this.handleSelector&&!(0,l.$)(e.target,this.handleSelector)||(this.subjectEl=s,this.isDragging=!0,this.wasTouchScroll=!1,0))}cleanup(){ce=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()}querySubjectEl(e){return this.selector?(0,l.$)(e.target,this.selector):this.containerEl}shouldIgnoreMouse(){return we||this.isTouchDragging}cancelTouchScroll(){this.isDragging&&(ce=!0)}initScrollWatch(e){this.shouldWatchScroll&&(this.recordCoords(e),window.addEventListener("scroll",this.handleScroll,!0))}recordCoords(e){this.shouldWatchScroll&&(this.prevPageX=e.pageX,this.prevPageY=e.pageY,this.prevScrollX=window.scrollX,this.prevScrollY=window.scrollY)}destroyScrollWatch(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)}createEventFromMouse(e,s){let o=0,a=0;return s?(this.origPageX=e.pageX,this.origPageY=e.pageY):(o=e.pageX-this.origPageX,a=e.pageY-this.origPageY),{origEvent:e,isTouch:!1,subjectEl:this.subjectEl,pageX:e.pageX,pageY:e.pageY,deltaX:o,deltaY:a}}createEventFromTouch(e,s){let a,h,o=e.touches,d=0,u=0;return o&&o.length?(a=o[0].pageX,h=o[0].pageY):(a=e.pageX,h=e.pageY),s?(this.origPageX=a,this.origPageY=h):(d=a-this.origPageX,u=h-this.origPageY),{origEvent:e,isTouch:!0,subjectEl:this.subjectEl,pageX:a,pageY:h,deltaX:d,deltaY:u}}}function De(f){ce&&f.preventDefault()}class Be{constructor(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}start(e,s,o){this.sourceEl=e,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=s-window.scrollX,this.origScreenY=o-window.scrollY,this.deltaX=0,this.deltaY=0,this.updateElPosition()}handleMove(e,s){this.deltaX=e-window.scrollX-this.origScreenX,this.deltaY=s-window.scrollY-this.origScreenY,this.updateElPosition()}setIsVisible(e){e?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=e,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=e)}stop(e,s){let o=()=>{this.cleanup(),s()};e&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(o,this.revertDuration):setTimeout(o,0)}doRevertAnimation(e,s){let o=this.mirrorEl,a=this.sourceEl.getBoundingClientRect();o.style.transition="top "+s+"ms,left "+s+"ms",(0,l.aP)(o,{left:a.left,top:a.top}),(0,l.b2)(o,()=>{o.style.transition="",e()})}cleanup(){this.mirrorEl&&((0,l.aO)(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null}updateElPosition(){this.sourceEl&&this.isVisible&&(0,l.aP)(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})}getMirrorEl(){let e=this.sourceElRect,s=this.mirrorEl;return s||(s=this.mirrorEl=this.sourceEl.cloneNode(!0),s.style.userSelect="none",s.style.webkitUserSelect="none",s.style.pointerEvents="none",s.classList.add("fc-event-dragging"),(0,l.aP)(s,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:e.right-e.left,height:e.bottom-e.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(s)),s}}class Ke extends l.bb{constructor(e,s){super(),this.handleScroll=()=>{this.scrollTop=this.scrollController.getScrollTop(),this.scrollLeft=this.scrollController.getScrollLeft(),this.handleScrollChange()},this.scrollController=e,this.doesListening=s,this.scrollTop=this.origScrollTop=e.getScrollTop(),this.scrollLeft=this.origScrollLeft=e.getScrollLeft(),this.scrollWidth=e.getScrollWidth(),this.scrollHeight=e.getScrollHeight(),this.clientWidth=e.getClientWidth(),this.clientHeight=e.getClientHeight(),this.clientRect=this.computeClientRect(),this.doesListening&&this.getEventTarget().addEventListener("scroll",this.handleScroll)}destroy(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)}getScrollTop(){return this.scrollTop}getScrollLeft(){return this.scrollLeft}setScrollTop(e){this.scrollController.setScrollTop(e),this.doesListening||(this.scrollTop=Math.max(Math.min(e,this.getMaxScrollTop()),0),this.handleScrollChange())}setScrollLeft(e){this.scrollController.setScrollLeft(e),this.doesListening||(this.scrollLeft=Math.max(Math.min(e,this.getMaxScrollLeft()),0),this.handleScrollChange())}getClientWidth(){return this.clientWidth}getClientHeight(){return this.clientHeight}getScrollWidth(){return this.scrollWidth}getScrollHeight(){return this.scrollHeight}handleScrollChange(){}}class xe extends Ke{constructor(e,s){super(new l.bc(e),s)}getEventTarget(){return this.scrollController.el}computeClientRect(){return(0,l.b3)(this.scrollController.el)}}class He extends Ke{constructor(e){super(new l.bd,e)}getEventTarget(){return window}computeClientRect(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}}handleScrollChange(){this.clientRect=this.computeClientRect()}}const Le="function"==typeof performance?performance.now:Date.now;class je{constructor(){this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=()=>{if(this.isAnimating){let e=this.computeBestEdge(this.pointerScreenX+window.scrollX,this.pointerScreenY+window.scrollY);if(e){let s=Le();this.handleSide(e,(s-this.msSinceRequest)/1e3),this.requestAnimation(s)}else this.isAnimating=!1}}}start(e,s,o){this.isEnabled&&(this.scrollCaches=this.buildCaches(o),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(e,s))}handleMove(e,s){if(this.isEnabled){let o=e-window.scrollX,a=s-window.scrollY,h=null===this.pointerScreenY?0:a-this.pointerScreenY,d=null===this.pointerScreenX?0:o-this.pointerScreenX;h<0?this.everMovedUp=!0:h>0&&(this.everMovedDown=!0),d<0?this.everMovedLeft=!0:d>0&&(this.everMovedRight=!0),this.pointerScreenX=o,this.pointerScreenY=a,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(Le()))}}stop(){if(this.isEnabled){this.isAnimating=!1;for(let e of this.scrollCaches)e.destroy();this.scrollCaches=null}}requestAnimation(e){this.msSinceRequest=e,requestAnimationFrame(this.animate)}handleSide(e,s){let{scrollCache:o}=e,{edgeThreshold:a}=this,h=a-e.distance,d=h*h/(a*a)*this.maxVelocity*s,u=1;switch(e.name){case"left":u=-1;case"right":o.setScrollLeft(o.getScrollLeft()+d*u);break;case"top":u=-1;case"bottom":o.setScrollTop(o.getScrollTop()+d*u)}}computeBestEdge(e,s){let{edgeThreshold:o}=this,a=null,h=this.scrollCaches||[];for(let d of h){let u=d.clientRect,p=e-u.left,y=u.right-e,v=s-u.top,S=u.bottom-s;p>=0&&y>=0&&v>=0&&S>=0&&(v<=o&&this.everMovedUp&&d.canScrollUp()&&(!a||a.distance>v)&&(a={scrollCache:d,name:"top",distance:v}),S<=o&&this.everMovedDown&&d.canScrollDown()&&(!a||a.distance>S)&&(a={scrollCache:d,name:"bottom",distance:S}),p<=o&&this.everMovedLeft&&d.canScrollLeft()&&(!a||a.distance>p)&&(a={scrollCache:d,name:"left",distance:p}),y<=o&&this.everMovedRight&&d.canScrollRight()&&(!a||a.distance>y)&&(a={scrollCache:d,name:"right",distance:y}))}return a}buildCaches(e){return this.queryScrollEls(e).map(s=>s===window?new He(!1):new xe(s,!1))}queryScrollEls(e){let s=[];for(let o of this.scrollQuery)"object"==typeof o?s.push(o):s.push(...Array.prototype.slice.call(e.getRootNode().querySelectorAll(o)));return s}}class he extends l.bH{constructor(e,s){super(e),this.containerEl=e,this.delay=null,this.minDistance=0,this.touchScrollAllowed=!0,this.mirrorNeedsRevert=!1,this.isInteracting=!1,this.isDragging=!1,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.delayTimeoutId=null,this.onPointerDown=a=>{this.isDragging||(this.isInteracting=!0,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,(0,l.ar)(document.body),(0,l.at)(document.body),a.isTouch||a.origEvent.preventDefault(),this.emitter.trigger("pointerdown",a),this.isInteracting&&!this.pointer.shouldIgnoreMove&&(this.mirror.setIsVisible(!1),this.mirror.start(a.subjectEl,a.pageX,a.pageY),this.startDelay(a),this.minDistance||this.handleDistanceSurpassed(a)))},this.onPointerMove=a=>{if(this.isInteracting){if(this.emitter.trigger("pointermove",a),!this.isDistanceSurpassed){let d,h=this.minDistance,{deltaX:u,deltaY:p}=a;d=u*u+p*p,d>=h*h&&this.handleDistanceSurpassed(a)}this.isDragging&&("scroll"!==a.origEvent.type&&(this.mirror.handleMove(a.pageX,a.pageY),this.autoScroller.handleMove(a.pageX,a.pageY)),this.emitter.trigger("dragmove",a))}},this.onPointerUp=a=>{this.isInteracting&&(this.isInteracting=!1,(0,l.as)(document.body),(0,l.au)(document.body),this.emitter.trigger("pointerup",a),this.isDragging&&(this.autoScroller.stop(),this.tryStopDrag(a)),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null))};let o=this.pointer=new ge(e);o.emitter.on("pointerdown",this.onPointerDown),o.emitter.on("pointermove",this.onPointerMove),o.emitter.on("pointerup",this.onPointerUp),s&&(o.selector=s),this.mirror=new Be,this.autoScroller=new je}destroy(){this.pointer.destroy(),this.onPointerUp({})}startDelay(e){"number"==typeof this.delay?this.delayTimeoutId=setTimeout(()=>{this.delayTimeoutId=null,this.handleDelayEnd(e)},this.delay):this.handleDelayEnd(e)}handleDelayEnd(e){this.isDelayEnded=!0,this.tryStartDrag(e)}handleDistanceSurpassed(e){this.isDistanceSurpassed=!0,this.tryStartDrag(e)}tryStartDrag(e){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(e.pageX,e.pageY,this.containerEl),this.emitter.trigger("dragstart",e),!1===this.touchScrollAllowed&&this.pointer.cancelTouchScroll())}tryStopDrag(e){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,e))}stopDrag(e){this.isDragging=!1,this.emitter.trigger("dragend",e)}setIgnoreMove(e){this.pointer.shouldIgnoreMove=e}setMirrorIsVisible(e){this.mirror.setIsVisible(e)}setMirrorNeedsRevert(e){this.mirrorNeedsRevert=e}setAutoScrollEnabled(e){this.autoScroller.isEnabled=e}}class $e{constructor(e){this.el=e,this.origRect=(0,l.b6)(e),this.scrollCaches=(0,l.b5)(e).map(s=>new xe(s,!0))}destroy(){for(let e of this.scrollCaches)e.destroy()}computeLeft(){let e=this.origRect.left;for(let s of this.scrollCaches)e+=s.origScrollLeft-s.getScrollLeft();return e}computeTop(){let e=this.origRect.top;for(let s of this.scrollCaches)e+=s.origScrollTop-s.getScrollTop();return e}isWithinClipping(e,s){let o={left:e,top:s};for(let a of this.scrollCaches)if(!Je(a.getEventTarget())&&!(0,l.aF)(o,a.clientRect))return!1;return!0}}function Je(f){let e=f.tagName;return"HTML"===e||"BODY"===e}class de{constructor(e,s){this.useSubjectCenter=!1,this.requireInitial=!0,this.disablePointCheck=!1,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=o=>{let{dragging:a}=this;this.initialHit=null,this.movingHit=null,this.finalHit=null,this.prepareHits(),this.processFirstCoord(o),this.initialHit||!this.requireInitial?(a.setIgnoreMove(!1),this.emitter.trigger("pointerdown",o)):a.setIgnoreMove(!0)},this.handleDragStart=o=>{this.emitter.trigger("dragstart",o),this.handleMove(o,!0)},this.handleDragMove=o=>{this.emitter.trigger("dragmove",o),this.handleMove(o)},this.handlePointerUp=o=>{this.releaseHits(),this.emitter.trigger("pointerup",o)},this.handleDragEnd=o=>{this.movingHit&&this.emitter.trigger("hitupdate",null,!0,o),this.finalHit=this.movingHit,this.movingHit=null,this.emitter.trigger("dragend",o)},this.droppableStore=s,e.emitter.on("pointerdown",this.handlePointerDown),e.emitter.on("dragstart",this.handleDragStart),e.emitter.on("dragmove",this.handleDragMove),e.emitter.on("pointerup",this.handlePointerUp),e.emitter.on("dragend",this.handleDragEnd),this.dragging=e,this.emitter=new l.F}processFirstCoord(e){let h,s={left:e.pageX,top:e.pageY},o=s,a=e.subjectEl;a instanceof HTMLElement&&(h=(0,l.b6)(a),o=(0,l.aG)(o,h));let d=this.initialHit=this.queryHitForOffset(o.left,o.top);if(d){if(this.useSubjectCenter&&h){let u=(0,l.aE)(h,d.rect);u&&(o=(0,l.aH)(u))}this.coordAdjust=(0,l.aI)(o,s)}else this.coordAdjust={left:0,top:0}}handleMove(e,s){let o=this.queryHitForOffset(e.pageX+this.coordAdjust.left,e.pageY+this.coordAdjust.top);(s||!Q(this.movingHit,o))&&(this.movingHit=o,this.emitter.trigger("hitupdate",o,!1,e))}prepareHits(){this.offsetTrackers=(0,l.a)(this.droppableStore,e=>(e.component.prepareHits(),new $e(e.el)))}releaseHits(){let{offsetTrackers:e}=this;for(let s in e)e[s].destroy();this.offsetTrackers={}}queryHitForOffset(e,s){let{droppableStore:o,offsetTrackers:a}=this,h=null;for(let d in o){let u=o[d].component,p=a[d];if(p&&p.isWithinClipping(e,s)){let y=p.computeLeft(),v=p.computeTop(),S=e-y,D=s-v,{origRect:E}=p,k=E.right-E.left,T=E.bottom-E.top;if(S>=0&&S<k&&D>=0&&D<T){let x=u.queryHit(S,D,k,T);x&&(0,l.b9)(x.dateProfile.activeRange,x.dateSpan.range)&&(this.disablePointCheck||p.el.contains(document.elementFromPoint(S+y-window.scrollX,D+v-window.scrollY)))&&(!h||x.layer>h.layer)&&(x.componentId=d,x.context=u.context,x.rect.left+=y,x.rect.right+=y,x.rect.top+=v,x.rect.bottom+=v,h=x)}}}return h}}function Q(f,e){return!f&&!e||!!f==!!e&&(0,l.bf)(f.dateSpan,e.dateSpan)}function me(f,e){let s={};for(let o of e.pluginHooks.datePointTransforms)Object.assign(s,o(f,e));return Object.assign(s,function Re(f,e){return{date:e.toDate(f.range.start),dateStr:e.formatIso(f.range.start,{omitTime:f.allDay}),allDay:f.allDay}}(f,e.dateEnv)),s}let Ue=(()=>{class f extends l.Z{constructor(s){super(s),this.subjectEl=null,this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=u=>{let p=u.origEvent.target,{component:y,dragging:v}=this,{mirror:S}=v,{options:D}=y.context,E=y.context;this.subjectEl=u.subjectEl;let k=this.subjectSeg=(0,l._)(u.subjectEl),x=(this.eventRange=k.eventRange).instance.instanceId;this.relevantEvents=(0,l.aV)(E.getCurrentData().eventStore,x),v.minDistance=u.isTouch?0:D.eventDragMinDistance,v.delay=u.isTouch&&x!==y.props.eventSelection?function tt(f){let{options:e}=f.context,s=e.eventLongPressDelay;return null==s&&(s=e.longPressDelay),s}(y):null,S.parentNode=D.fixedMirrorParent?D.fixedMirrorParent:(0,l.$)(p,".fc"),S.revertDuration=D.dragRevertDuration;let _=y.isValidSegDownEl(p)&&!(0,l.$)(p,".fc-event-resizer");v.setIgnoreMove(!_),this.isDragging=_&&u.subjectEl.classList.contains("fc-event-draggable")},this.handleDragStart=u=>{let p=this.component.context,y=this.eventRange,v=y.instance.instanceId;u.isTouch?v!==this.component.props.eventSelection&&p.dispatch({type:"SELECT_EVENT",eventInstanceId:v}):p.dispatch({type:"UNSELECT_EVENT"}),this.isDragging&&(p.calendarApi.unselect(u),p.emitter.trigger("eventDragStart",{el:this.subjectEl,event:new l.a0(p,y.def,y.instance),jsEvent:u.origEvent,view:p.viewApi}))},this.handleHitUpdate=(u,p)=>{if(!this.isDragging)return;let y=this.relevantEvents,v=this.hitDragging.initialHit,S=this.component.context,D=null,E=null,k=null,T=!1,x={affectedEvents:y,mutatedEvents:(0,l.I)(),isEvent:!0};if(u){D=u.context;let _=D.options;S===D||_.editable&&_.droppable?(E=function et(f,e,s,o){let a=f.dateSpan,h=e.dateSpan,d=a.range.start,u=h.range.start,p={};a.allDay!==h.allDay&&(p.allDay=h.allDay,p.hasEnd=e.context.options.allDayMaintainDuration,d=h.allDay?(0,l.q)(s):s);let y=(0,l.aA)(d,u,f.context.dateEnv,f.componentId===e.componentId?f.largeUnit:null);y.milliseconds&&(p.allDay=!1);let v={datesDelta:y,standardProps:p};for(let S of o)S(v,f,e);return v}(v,u,this.eventRange.instance.range.start,D.getCurrentData().pluginHooks.eventDragMutationMassagers),E&&(k=(0,l.bX)(y,D.getCurrentData().eventUiBases,E,D),x.mutatedEvents=k,(0,l.bZ)(x,u.dateProfile,D)||(T=!0,E=null,k=null,x.mutatedEvents=(0,l.I)()))):D=null}this.displayDrag(D,x),T?(0,l.ax)():(0,l.aw)(),p||(S===D&&Q(v,u)&&(E=null),this.dragging.setMirrorNeedsRevert(!E),this.dragging.setMirrorIsVisible(!u||!this.subjectEl.getRootNode().querySelector(".fc-event-mirror")),this.receivingContext=D,this.validMutation=E,this.mutatedRelevantEvents=k)},this.handlePointerUp=()=>{this.isDragging||this.cleanup()},this.handleDragEnd=u=>{if(this.isDragging){let p=this.component.context,y=p.viewApi,{receivingContext:v,validMutation:S}=this,D=this.eventRange.def,E=this.eventRange.instance,k=new l.a0(p,D,E),T=this.relevantEvents,x=this.mutatedRelevantEvents,{finalHit:_}=this.hitDragging;if(this.clearDrag(),p.emitter.trigger("eventDragStop",{el:this.subjectEl,event:k,jsEvent:u.origEvent,view:y}),S){if(v===p){let n=new l.a0(p,x.defs[D.defId],E?x.instances[E.instanceId]:null);p.dispatch({type:"MERGE_EVENTS",eventStore:x});let t={oldEvent:k,event:n,relatedEvents:(0,l.w)(x,p,E),revert(){p.dispatch({type:"MERGE_EVENTS",eventStore:T})}},i={};for(let r of p.getCurrentData().pluginHooks.eventDropTransformers)Object.assign(i,r(S,p));p.emitter.trigger("eventDrop",Object.assign(Object.assign(Object.assign({},t),i),{el:u.subjectEl,delta:S.datesDelta,jsEvent:u.origEvent,view:y})),p.emitter.trigger("eventChange",t)}else if(v){let n={event:k,relatedEvents:(0,l.w)(T,p,E),revert(){p.dispatch({type:"MERGE_EVENTS",eventStore:T})}};p.emitter.trigger("eventLeave",Object.assign(Object.assign({},n),{draggedEl:u.subjectEl,view:y})),p.dispatch({type:"REMOVE_EVENTS",eventStore:T}),p.emitter.trigger("eventRemove",n);let i=x.instances[E.instanceId],r=new l.a0(v,x.defs[D.defId],i);v.dispatch({type:"MERGE_EVENTS",eventStore:x});let c={event:r,relatedEvents:(0,l.w)(x,v,i),revert(){v.dispatch({type:"REMOVE_EVENTS",eventStore:x})}};v.emitter.trigger("eventAdd",c),u.isTouch&&v.dispatch({type:"SELECT_EVENT",eventInstanceId:E.instanceId}),v.emitter.trigger("drop",Object.assign(Object.assign({},me(_.dateSpan,v)),{draggedEl:u.subjectEl,jsEvent:u.origEvent,view:_.context.viewApi})),v.emitter.trigger("eventReceive",Object.assign(Object.assign({},c),{draggedEl:u.subjectEl,view:_.context.viewApi}))}}else p.emitter.trigger("_noEventDrop")}this.cleanup()};let{component:o}=this,{options:a}=o.context,h=this.dragging=new he(s.el);h.pointer.selector=f.SELECTOR,h.touchScrollAllowed=!1,h.autoScroller.isEnabled=a.dragScroll;let d=this.hitDragging=new de(this.dragging,l.a7);d.useSubjectCenter=s.useEventCenter,d.emitter.on("pointerdown",this.handlePointerDown),d.emitter.on("dragstart",this.handleDragStart),d.emitter.on("hitupdate",this.handleHitUpdate),d.emitter.on("pointerup",this.handlePointerUp),d.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}displayDrag(s,o){let h=this.receivingContext;h&&h!==s&&h.dispatch(h===this.component.context?{type:"SET_EVENT_DRAG",state:{affectedEvents:o.affectedEvents,mutatedEvents:(0,l.I)(),isEvent:!0}}:{type:"UNSET_EVENT_DRAG"}),s&&s.dispatch({type:"SET_EVENT_DRAG",state:o})}clearDrag(){let s=this.component.context,{receivingContext:o}=this;o&&o.dispatch({type:"UNSET_EVENT_DRAG"}),s!==o&&s.dispatch({type:"UNSET_EVENT_DRAG"})}cleanup(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null}}return f.SELECTOR=".fc-event-draggable, .fc-event-resizable",f})();const nt={fixedMirrorParent:l.n},rt={dateClick:l.n,eventDragStart:l.n,eventDragStop:l.n,eventDrop:l.n,eventResizeStart:l.n,eventResizeStop:l.n,eventResize:l.n,drop:l.n,eventReceive:l.n,eventLeave:l.n};l.bI.dataAttrPrefix="";var lt=(0,g.rx)({name:"@fullcalendar/interaction",componentInteractions:[class ve extends l.Z{constructor(e){super(e),this.handlePointerDown=o=>{let{dragging:a}=this;a.setIgnoreMove(!this.component.isValidDateDownEl(o.origEvent.target))},this.handleDragEnd=o=>{let{component:a}=this,{pointer:h}=this.dragging;if(!h.wasTouchScroll){let{initialHit:d,finalHit:u}=this.hitDragging;if(d&&u&&Q(d,u)){let{context:p}=a,y=Object.assign(Object.assign({},me(d.dateSpan,p)),{dayEl:d.dayEl,jsEvent:o.origEvent,view:p.viewApi||p.calendarApi.view});p.emitter.trigger("dateClick",y)}}},this.dragging=new he(e.el),this.dragging.autoScroller.isEnabled=!1;let s=this.hitDragging=new de(this.dragging,(0,l.bG)(e));s.emitter.on("pointerdown",this.handlePointerDown),s.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}},class Te extends l.Z{constructor(e){super(e),this.dragSelection=null,this.handlePointerDown=d=>{let{component:u,dragging:p}=this,{options:y}=u.context,v=y.selectable&&u.isValidDateDownEl(d.origEvent.target);p.setIgnoreMove(!v),p.delay=d.isTouch?function Qe(f){let{options:e}=f.context,s=e.selectLongPressDelay;return null==s&&(s=e.longPressDelay),s}(u):null},this.handleDragStart=d=>{this.component.context.calendarApi.unselect(d)},this.handleHitUpdate=(d,u)=>{let{context:p}=this.component,y=null,v=!1;if(d){let S=this.hitDragging.initialHit;d.componentId===S.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(S,d)||(y=function ze(f,e,s){let o=f.dateSpan,a=e.dateSpan,h=[o.range.start,o.range.end,a.range.start,a.range.end];h.sort(l.av);let d={};for(let u of s){let p=u(f,e);if(!1===p)return null;p&&Object.assign(d,p)}return d.range={start:h[0],end:h[3]},d.allDay=o.allDay,d}(S,d,p.pluginHooks.dateSelectionTransformers)),(!y||!(0,l.b_)(y,d.dateProfile,p))&&(v=!0,y=null)}y?p.dispatch({type:"SELECT_DATES",selection:y}):u||p.dispatch({type:"UNSELECT_DATES"}),v?(0,l.ax)():(0,l.aw)(),u||(this.dragSelection=y)},this.handlePointerUp=d=>{this.dragSelection&&((0,l.cu)(this.dragSelection,d,this.component.context),this.dragSelection=null)};let{component:s}=e,{options:o}=s.context,a=this.dragging=new he(e.el);a.touchScrollAllowed=!1,a.minDistance=o.selectMinDistance||0,a.autoScroller.isEnabled=o.dragScroll;let h=this.hitDragging=new de(this.dragging,(0,l.bG)(e));h.emitter.on("pointerdown",this.handlePointerDown),h.emitter.on("dragstart",this.handleDragStart),h.emitter.on("hitupdate",this.handleHitUpdate),h.emitter.on("pointerup",this.handlePointerUp)}destroy(){this.dragging.destroy()}},Ue,class it extends l.Z{constructor(e){super(e),this.draggingSegEl=null,this.draggingSeg=null,this.eventRange=null,this.relevantEvents=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=h=>{let{component:d}=this,u=this.querySegEl(h),p=(0,l._)(u),y=this.eventRange=p.eventRange;this.dragging.minDistance=d.context.options.eventDragMinDistance,this.dragging.setIgnoreMove(!this.component.isValidSegDownEl(h.origEvent.target)||h.isTouch&&this.component.props.eventSelection!==y.instance.instanceId)},this.handleDragStart=h=>{let{context:d}=this.component,u=this.eventRange;this.relevantEvents=(0,l.aV)(d.getCurrentData().eventStore,this.eventRange.instance.instanceId);let p=this.querySegEl(h);this.draggingSegEl=p,this.draggingSeg=(0,l._)(p),d.calendarApi.unselect(),d.emitter.trigger("eventResizeStart",{el:p,event:new l.a0(d,u.def,u.instance),jsEvent:h.origEvent,view:d.viewApi})},this.handleHitUpdate=(h,d,u)=>{let{context:p}=this.component,y=this.relevantEvents,v=this.hitDragging.initialHit,S=this.eventRange.instance,D=null,E=null,k=!1,T={affectedEvents:y,mutatedEvents:(0,l.I)(),isEvent:!0};h&&(h.componentId===v.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(v,h)||(D=function st(f,e,s,o){let a=f.context.dateEnv,u=(0,l.aA)(f.dateSpan.range.start,e.dateSpan.range.start,a,f.largeUnit);if(s){if(a.add(o.start,u)<o.end)return{startDelta:u}}else if(a.add(o.end,u)>o.start)return{endDelta:u};return null}(v,h,u.subjectEl.classList.contains("fc-event-resizer-start"),S.range))),D&&(E=(0,l.bX)(y,p.getCurrentData().eventUiBases,D,p),T.mutatedEvents=E,(0,l.bZ)(T,h.dateProfile,p)||(k=!0,D=null,E=null,T.mutatedEvents=null)),p.dispatch(E?{type:"SET_EVENT_RESIZE",state:T}:{type:"UNSET_EVENT_RESIZE"}),k?(0,l.ax)():(0,l.aw)(),d||(D&&Q(v,h)&&(D=null),this.validMutation=D,this.mutatedRelevantEvents=E)},this.handleDragEnd=h=>{let{context:d}=this.component,u=this.eventRange.def,p=this.eventRange.instance,y=new l.a0(d,u,p),v=this.relevantEvents,S=this.mutatedRelevantEvents;if(d.emitter.trigger("eventResizeStop",{el:this.draggingSegEl,event:y,jsEvent:h.origEvent,view:d.viewApi}),this.validMutation){let D=new l.a0(d,S.defs[u.defId],p?S.instances[p.instanceId]:null);d.dispatch({type:"MERGE_EVENTS",eventStore:S});let E={oldEvent:y,event:D,relatedEvents:(0,l.w)(S,d,p),revert(){d.dispatch({type:"MERGE_EVENTS",eventStore:v})}};d.emitter.trigger("eventResize",Object.assign(Object.assign({},E),{el:this.draggingSegEl,startDelta:this.validMutation.startDelta||(0,l.d)(0),endDelta:this.validMutation.endDelta||(0,l.d)(0),jsEvent:h.origEvent,view:d.viewApi})),d.emitter.trigger("eventChange",E)}else d.emitter.trigger("_noEventResize");this.draggingSeg=null,this.relevantEvents=null,this.validMutation=null};let{component:s}=e,o=this.dragging=new he(e.el);o.pointer.selector=".fc-event-resizer",o.touchScrollAllowed=!1,o.autoScroller.isEnabled=s.context.options.dragScroll;let a=this.hitDragging=new de(this.dragging,(0,l.bG)(e));a.emitter.on("pointerdown",this.handlePointerDown),a.emitter.on("dragstart",this.handleDragStart),a.emitter.on("hitupdate",this.handleHitUpdate),a.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}querySegEl(e){return(0,l.$)(e.subjectEl,".fc-event")}}],calendarInteractions:[class Ce{constructor(e){this.context=e,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=o=>{o.jsEvent&&(this.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=o=>{let a=this.context.options.unselectCancel,h=(0,l.aR)(o.origEvent);this.matchesCancel=!!(0,l.$)(h,a),this.matchesEvent=!!(0,l.$)(h,Ue.SELECTOR)},this.onDocumentPointerUp=o=>{let{context:a}=this,{documentPointer:h}=this,d=a.getCurrentData();if(!h.wasTouchScroll){if(d.dateSelection&&!this.isRecentPointerDateSelect){let u=a.options.unselectAuto;u&&(!u||!this.matchesCancel)&&a.calendarApi.unselect(o)}d.eventSelection&&!this.matchesEvent&&a.dispatch({type:"UNSELECT_EVENT"})}this.isRecentPointerDateSelect=!1};let s=this.documentPointer=new ge(document);s.shouldIgnoreMove=!0,s.shouldWatchScroll=!1,s.emitter.on("pointerdown",this.onDocumentPointerDown),s.emitter.on("pointerup",this.onDocumentPointerUp),e.emitter.on("select",this.onSelect)}destroy(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()}}],elementDraggingImpl:he,optionRefiners:nt,listenerRefiners:rt}),H=O(4946),ye=O(8889),ct=O(6814),_e=O(2495);function ht(f,e){if(1&f&&H._UZ(0,"full-calendar",7),2&f){const s=H.oxw();H.Q6J("options",s.calendarOptions)}}let Me=(()=>{class f{constructor(s){this.commonService=s,this.showCalendar=!1,this.eventsArray=[],this.datas=[],this.calendarOptions={initialView:"dayGridMonth",plugins:[Ze,lt],dateClick:o=>this.handleDateClick(o),events:this.eventsArray}}handleDateClick(s){alert("Date clicked: "+s.dateStr)}ngOnInit(){this.commonService.getAttendence().subscribe({next:s=>{s.success&&(s.data.map(o=>{this.eventsArray.push(o)}),this.showCalendar=!0)},error:s=>{this.commonService.errorBooleanSubject.next(!0),this.commonService.errorMessage.next(s.error.message)}})}static#e=this.\u0275fac=function(o){return new(o||f)(H.Y36(ye.R))};static#t=this.\u0275cmp=H.Xpm({type:f,selectors:[["app-attendence-callender"]],decls:10,vars:1,consts:[[1,"w-full","h-full","bg-[#2e406e]","flex","flex-col","justify-center","items-center"],[1,"md:w-6/12","md:p-8","p-2","rounded-md","gap-4"],["class","bg-[#ffffff] p-7 rounded-lg",3,"options",4,"ngIf"],[1,"grid","grid-cols-3","gap-3","py-5"],[1,"text-white","rounded-lg","overflow-hidden","h-[60px]","w-[60px]","bg-[green]","grid","place-items-center","text-[12px]"],[1,"text-black","rounded-lg","overflow-hidden","h-[60px]","w-[60px]","bg-[yellow]","grid","place-items-center","text-[12px]"],[1,"text-white","rounded-lg","overflow-hidden","h-[60px]","w-[60px]","bg-[red]","grid","place-items-center","text-[12px]"],[1,"bg-[#ffffff]","p-7","rounded-lg",3,"options"]],template:function(o,a){1&o&&(H.TgZ(0,"div",0)(1,"div",1),H.YNc(2,ht,1,1,"full-calendar",2),H.qZA(),H.TgZ(3,"div",3)(4,"h1",4),H._uU(5," Present"),H.qZA(),H.TgZ(6,"h1",5),H._uU(7," Late "),H.qZA(),H.TgZ(8,"h1",6),H._uU(9," Leave"),H.qZA()()()),2&o&&(H.xp6(2),H.Q6J("ngIf",a.showCalendar))},dependencies:[ct.O5,_e.w],styles:["@media (max-width:950px){.fc-button-group[_ngcontent-%COMP%]{margin-top:10px}}"]})}return f})()},4223:(Ve,se,O)=>{O.d(se,{h:()=>Ie});var g=O(4946),l=O(9776),b=O(8889),F=O(6814);function L(A,q){if(1&A&&(g.TgZ(0,"h1",16),g._uU(1),g.qZA()),2&A){const R=g.oxw();g.xp6(1),g.hij("Worked Hours :",null==R.data?null:R.data.workingHours,"")}}function K(A,q){if(1&A&&(g.TgZ(0,"div",17)(1,"span",18),g._uU(2,"WORKED HOURES : "),g.qZA(),g._uU(3),g.qZA()),2&A){const R=g.oxw();g.xp6(3),g.hij(" ",R.formatTime(R.workingTime)," ")}}function B(A,q){if(1&A){const R=g.EpF();g.TgZ(0,"img",19),g.NdJ("click",function(){g.CHM(R);const w=g.oxw();return g.KtG(w.checkIn())}),g.qZA()}}function z(A,q){if(1&A){const R=g.EpF();g.TgZ(0,"img",20),g.NdJ("click",function(){g.CHM(R);const w=g.oxw();return g.KtG(w.checkOut())}),g.qZA()}}function Y(A,q){1&A&&(g.TgZ(0,"h1",21)(1,"button"),g._uU(2,"Check IN"),g.qZA()())}function ne(A,q){1&A&&(g.TgZ(0,"h1",21)(1,"button"),g._uU(2,"Check OUT"),g.qZA()())}function te(A,q){if(1&A){const R=g.EpF();g.TgZ(0,"button",22),g.NdJ("click",function(){g.CHM(R);const w=g.oxw();return g.KtG(w.takeBreak())}),g._uU(1,"Take Break"),g.qZA()}}function Ee(A,q){if(1&A){const R=g.EpF();g.TgZ(0,"button",22),g.NdJ("click",function(){g.CHM(R);const w=g.oxw();return g.KtG(w.breakEnd())}),g._uU(1,"End Break"),g.qZA()}}function X(A,q){1&A&&(g.TgZ(0,"div",23),g._uU(1," Now you are In Break "),g.qZA())}function $(A,q){if(1&A&&(g.TgZ(0,"div",24)(1,"span",18),g._uU(2,"Break Time Taken "),g.qZA(),g._uU(3),g.qZA()),2&A){const R=g.oxw();g.xp6(3),g.hij(": ",R.formatTime(R.breakTime)," ")}}let Ie=(()=>{class A{constructor(R,I){this.employeeservice=R,this.commonService=I,this.checkInboolean=!0,this.breakBoolean=!0,this.startTime=0,this.workingTime=0,this.breakStart=0,this.breakTime=0}ngOnInit(){this.date=new Date,this.getEmplyee(),this.checkCheckined(),this.checkBreak()}checkIn(){this.commonService.loadingSubject.next(!0),this.startTime=Date.now(),this.date=new Date;const R=this.date.toDateString();this.date=this.date.toString(),this.employeeservice.checkIn({employeeId:this.employeeId,date:R}).subscribe({next:w=>{w.success&&(this.commonService.loadingSubject.next(!1),this.checkInboolean=!1,this.commonService.successBooleanSubject.next(!0),this.commonService.successMessage.next("Success Fully Checkined"),this.timerInterval=setInterval(()=>{this.workingTime=Date.now()-this.startTime},1e3))},error:w=>{this.commonService.loadingSubject.next(!1),this.commonService.errorBooleanSubject.next(!0),this.commonService.errorMessage.next(w.error.message)}})}checkOut(){this.commonService.loadingSubject.next(!0),this.date=new Date;const R=this.date.toDateString(),I={employeeId:this.employeeId,date:R,workedHoures:this.formatTime(this.workingTime)};this.employeeservice.checkOut(I).subscribe({next:w=>{w.success?(this.commonService.loadingSubject.next(!1),clearInterval(this.timerInterval),this.checkInboolean=!0,this.commonService.successBooleanSubject.next(!0),this.commonService.successMessage.next(w?.message),this.checkCheckined(),clearInterval(this.breakTimerInterval),this.breakBoolean=!0):(this.commonService.loadingSubject.next(!1),this.commonService.errorBooleanSubject.next(!0),this.commonService.errorMessage.next(w.message))},error:w=>{this.commonService.loadingSubject.next(!1),this.commonService.errorBooleanSubject.next(!0),this.commonService.errorMessage.next(w.error.message)}})}formatTime(R){const I=Math.floor(R/1e3)%60,w=Math.floor(R/6e4)%60;return`${Math.floor(R/36e5)}h ${w}m ${I}s`}getEmplyee(){const R=this.commonService.tockendecode();this.employeeId=R.employeeId,this.employeeName=R.name}checkCheckined(){this.employeeservice.checkCheckined(this.date,this.employeeId).subscribe({next:R=>{if(R.success){this.checkInboolean=!1,this.data=R.data;const[I,w]=this.data.checkIn.split(", "),[J,re,oe]=I.split("/"),[W,G]=w.split(" "),[j,V,ae]=W.split(":"),N=new Date(oe,J-1,re,"PM"===G&&"12"!==j?+j+12:"AM"===G&&"12"===j?0:+j,+V,+ae).getTime();this.timerInterval=setInterval(()=>{this.workingTime=Date.now()-N},1e3)}else this.checkInboolean=!0,this.data=R.data},error:R=>{this.commonService.errorBooleanSubject.next(!0),this.commonService.errorMessage.next(R.error.message)}})}takeBreak(){this.commonService.loadingSubject.next(!0),this.breakStart=Date.now(),this.date=new Date;const R=this.date.toDateString();this.employeeservice.takeBreak({employeeId:this.employeeId,date:R}).subscribe({next:w=>{w.success?(this.commonService.loadingSubject.next(!1),this.breakBoolean=!1,this.commonService.successBooleanSubject.next(!0),this.commonService.successMessage.next(w.message),this.breakTimerInterval=setInterval(()=>{this.breakTime=Date.now()-this.breakStart},1e3)):(this.commonService.loadingSubject.next(!1),this.commonService.errorBooleanSubject.next(!0),this.commonService.errorMessage.next(w.message))},error:w=>{this.commonService.loadingSubject.next(!1),this.commonService.errorBooleanSubject.next(!0),this.commonService.errorMessage.next(w.error.message)}})}checkBreak(){this.employeeservice.checkBreak(this.date,this.employeeId).subscribe({next:R=>{if(R.success){this.breakBoolean=!1;const I=R.data?.break?.[R.data?.break?.length-1],[w,J]=I?.breakStart.split(", "),[re,oe,W]=w.split("/"),[G,j]=J.split(" "),[V,ae,le]=G.split(":"),Se=new Date(W,re-1,oe,"PM"===j&&"12"!==V?+V+12:"AM"===j&&"12"===V?0:+V,+ae,+le).getTime();this.breakTimerInterval=setInterval(()=>{this.breakTime=Date.now()-Se},1e3)}},error:R=>{this.commonService.errorBooleanSubject.next(!0),this.commonService.errorMessage.next(R.error.message)}})}breakEnd(){this.commonService.loadingSubject.next(!0),this.date=new Date;const R=this.date.toDateString(),I={employeeId:this.employeeId,date:R,workedHoures:this.formatTime(this.breakTime)};this.employeeservice.breakEnd(I).subscribe({next:w=>{w.success?(this.commonService.loadingSubject.next(!1),clearInterval(this.breakTimerInterval),this.breakBoolean=!0,this.commonService.successBooleanSubject.next(!0),this.commonService.successMessage.next(w?.message)):(this.commonService.loadingSubject.next(!1),this.commonService.errorBooleanSubject.next(!0),this.commonService.errorMessage.next(w.message))},error:w=>{this.commonService.loadingSubject.next(!1),this.commonService.errorBooleanSubject.next(!0),this.commonService.errorMessage.next(w.error.message)}})}ngOnDestroy(){clearInterval(this.timerInterval),clearInterval(this.breakTimerInterval)}static#e=this.\u0275fac=function(I){return new(I||A)(g.Y36(l.U),g.Y36(b.R))};static#t=this.\u0275cmp=g.Xpm({type:A,selectors:[["app-employee-home"]],decls:23,vars:17,consts:[[1,"w-full","px-3","pt-3"],[1,"one","text-[20px]"],[1,"text-[red]","font-extrabold","pr-3"],[1,"font-bold","text-[17px]","flex","justify-between"],["class","text-[orangered]",4,"ngIf"],["class","text-center py-2 text-[20px]",4,"ngIf"],[1,"flex","items-center","flex-col"],[1,"border-[10px]","p-10","rounded-full"],["class","image  ","src","/assets/images/check-in.png","alt","",3,"click",4,"ngIf"],["class","image  ","src","/assets/images/sign-out.png","alt","",3,"click",4,"ngIf"],["class","mt-3 text-[20px]",4,"ngIf"],["class","mt-3 text-[20px] ",4,"ngIf"],[1,"flex","justify-around","mt-2","mb-3"],["class","button",3,"click",4,"ngIf"],["class","text-[22px] text-[#989833] mt-8",4,"ngIf"],["class","py-2",4,"ngIf"],[1,"text-[orangered]"],[1,"text-center","py-2","text-[20px]"],[1,"font-bold","text-[20px]","text-green-700"],["src","/assets/images/check-in.png","alt","",1,"image",3,"click"],["src","/assets/images/sign-out.png","alt","",1,"image",3,"click"],[1,"mt-3","text-[20px]"],[1,"button",3,"click"],[1,"text-[22px]","text-[#989833]","mt-8"],[1,"py-2"]],template:function(I,w){1&I&&(g.TgZ(0,"div",0)(1,"h1",1)(2,"span",2),g._uU(3,"WELCOME"),g.qZA(),g._uU(4),g.ALo(5,"uppercase"),g.qZA(),g.TgZ(6,"div",3)(7,"h1"),g._uU(8),g.ALo(9,"date"),g.qZA(),g.YNc(10,L,2,1,"h1",4),g.qZA(),g.YNc(11,K,4,1,"div",5),g.TgZ(12,"div",6)(13,"div",7),g.YNc(14,B,1,0,"img",8),g.YNc(15,z,1,0,"img",9),g.qZA(),g.YNc(16,Y,3,0,"h1",10),g.YNc(17,ne,3,0,"h1",11),g.qZA(),g.TgZ(18,"div",12),g.YNc(19,te,2,0,"button",13),g.YNc(20,Ee,2,0,"button",13),g.qZA(),g.YNc(21,X,2,0,"div",14),g.YNc(22,$,4,1,"div",15),g.qZA()),2&I&&(g.xp6(4),g.hij(" ",g.lcZ(5,12,w.employeeName),""),g.xp6(4),g.hij("DATE : ",g.xi3(9,14,w.date,"dd/MM/yyyy"),""),g.xp6(2),g.Q6J("ngIf",(null==w.data?null:w.data.workingHours)&&w.checkInboolean),g.xp6(1),g.Q6J("ngIf",!w.checkInboolean),g.xp6(3),g.Q6J("ngIf",w.checkInboolean),g.xp6(1),g.Q6J("ngIf",!w.checkInboolean),g.xp6(1),g.Q6J("ngIf",w.checkInboolean),g.xp6(1),g.Q6J("ngIf",!w.checkInboolean),g.xp6(2),g.Q6J("ngIf",!w.checkInboolean&&w.breakBoolean),g.xp6(1),g.Q6J("ngIf",!w.breakBoolean),g.xp6(1),g.Q6J("ngIf",!w.breakBoolean),g.xp6(1),g.Q6J("ngIf",!w.breakBoolean))},dependencies:[F.O5,F.gd,F.uU],styles:[".image[_ngcontent-%COMP%]{width:100px}.button[_ngcontent-%COMP%]{padding:10px 15px;background-color:#0d2b4d;color:#fff;font-weight:600;border-radius:10px}.one[_ngcontent-%COMP%]{padding-bottom:10px}"]})}return A})()},9776:(Ve,se,O)=>{O.d(se,{U:()=>F});var g=O(9947),l=O(4946),b=O(9862);let F=(()=>{class L{constructor(B){this.http=B,this.api=g.N.api}checkIn(B){return this.http.post(`${this.api}/employee/checkIn`,B)}checkCheckined(B,z){const Y=B.toDateString();return this.http.get(`${this.api}/employee/checkCheckin?date=${Y}&employeeId=${z}`)}checkOut(B){return this.http.post(`${this.api}/employee/checkOut`,B)}takeBreak(B){return this.http.post(`${this.api}/employee/takeBreak`,B)}checkBreak(B,z){const Y=B.toDateString();return this.http.get(`${this.api}/employee/breakCheck?date=${Y}&employeeId=${z}`)}breakEnd(B){return this.http.post(`${this.api}/employee/breakEnd`,B)}requestForLeave(B){return this.http.post(`${this.api}/employee/leaveRequest`,B)}getAttendance(){return this.http.get(`${this.api}/employee/getAttendance`)}static#e=this.\u0275fac=function(z){return new(z||L)(l.LFG(b.eN))};static#t=this.\u0275prov=l.Yz7({token:L,factory:L.\u0275fac,providedIn:"root"})}return L})()},4224:(Ve,se,O)=>{O.d(se,{$:()=>_});var g={};O.r(g),O.d(g,{Decoder:()=>h,Encoder:()=>o,PacketType:()=>s,protocol:()=>e});const l=Object.create(null);l.open="0",l.close="1",l.ping="2",l.pong="3",l.message="4",l.upgrade="5",l.noop="6";const b=Object.create(null);Object.keys(l).forEach(n=>{b[l[n]]=n});const F={type:"error",data:"parser error"},L="function"==typeof Blob||typeof Blob<"u"&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),K="function"==typeof ArrayBuffer,B=n=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer,z=({type:n,data:t},i,r)=>L&&t instanceof Blob?i?r(t):Y(t,r):K&&(t instanceof ArrayBuffer||B(t))?i?r(t):Y(new Blob([t]),r):r(l[n]+(t||"")),Y=(n,t)=>{const i=new FileReader;return i.onload=function(){const r=i.result.split(",")[1];t("b"+(r||""))},i.readAsDataURL(n)};function ne(n){return n instanceof Uint8Array?n:n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}let te;const $=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let n=0;n<64;n++)$["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(n)]=n;const q="function"==typeof ArrayBuffer,R=(n,t)=>{if("string"!=typeof n)return{type:"message",data:w(n,t)};const i=n.charAt(0);return"b"===i?{type:"message",data:I(n.substring(1),t)}:b[i]?n.length>1?{type:b[i],data:n.substring(1)}:{type:b[i]}:F},I=(n,t)=>{if(q){const i=(n=>{let r,m,C,M,P,t=.75*n.length,i=n.length,c=0;"="===n[n.length-1]&&(t--,"="===n[n.length-2]&&t--);const ie=new ArrayBuffer(t),ee=new Uint8Array(ie);for(r=0;r<i;r+=4)m=$[n.charCodeAt(r)],C=$[n.charCodeAt(r+1)],M=$[n.charCodeAt(r+2)],P=$[n.charCodeAt(r+3)],ee[c++]=m<<2|C>>4,ee[c++]=(15&C)<<4|M>>2,ee[c++]=(3&M)<<6|63&P;return ie})(n);return w(i,t)}return{base64:!0,data:n}},w=(n,t)=>"blob"===t?n instanceof Blob?n:new Blob([n]):n instanceof ArrayBuffer?n:n.buffer,J=String.fromCharCode(30);let G;function j(n){return n.reduce((t,i)=>t+i.length,0)}function V(n,t){if(n[0].length===t)return n.shift();const i=new Uint8Array(t);let r=0;for(let c=0;c<t;c++)i[c]=n[0][r++],r===n[0].length&&(n.shift(),r=0);return n.length&&r<n[0].length&&(n[0]=n[0].slice(r)),i}function N(n){if(n)return function Se(n){for(var t in N.prototype)n[t]=N.prototype[t];return n}(n)}N.prototype.on=N.prototype.addEventListener=function(n,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(t),this},N.prototype.once=function(n,t){function i(){this.off(n,i),t.apply(this,arguments)}return i.fn=t,this.on(n,i),this},N.prototype.off=N.prototype.removeListener=N.prototype.removeAllListeners=N.prototype.removeEventListener=function(n,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i=this._callbacks["$"+n];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+n],this;for(var r,c=0;c<i.length;c++)if((r=i[c])===t||r.fn===t){i.splice(c,1);break}return 0===i.length&&delete this._callbacks["$"+n],this},N.prototype.emitReserved=N.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),i=this._callbacks["$"+n],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(i){r=0;for(var c=(i=i.slice(0)).length;r<c;++r)i[r].apply(this,t)}return this},N.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]},N.prototype.hasListeners=function(n){return!!this.listeners(n).length};const U=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function Pe(n,...t){return t.reduce((i,r)=>(n.hasOwnProperty(r)&&(i[r]=n[r]),i),{})}const We=U.setTimeout,Fe=U.clearTimeout;function ue(n,t){t.useNativeTimers?(n.setTimeoutFn=We.bind(U),n.clearTimeoutFn=Fe.bind(U)):(n.setTimeoutFn=U.setTimeout.bind(U),n.clearTimeoutFn=U.clearTimeout.bind(U))}function Xe(n){return"string"==typeof n?function Ge(n){let t=0,i=0;for(let r=0,c=n.length;r<c;r++)t=n.charCodeAt(r),t<128?i+=1:t<2048?i+=2:t<55296||t>=57344?i+=3:(r++,i+=4);return i}(n):Math.ceil(1.33*(n.byteLength||n.size))}class fe extends Error{constructor(t,i,r){super(t),this.description=i,this.context=r,this.type="TransportError"}}class ce extends N{constructor(t){super(),this.writable=!1,ue(this,t),this.opts=t,this.query=t.query,this.socket=t.socket}onError(t,i,r){return super.emitReserved("error",new fe(t,i,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return("opening"===this.readyState||"open"===this.readyState)&&(this.doClose(),this.onClose()),this}send(t){"open"===this.readyState&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const i=R(t,this.socket.binaryType);this.onPacket(i)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,i={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(i)}_hostname(){const t=this.opts.hostname;return-1===t.indexOf(":")?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(t){const i=function Ze(n){let t="";for(let i in n)n.hasOwnProperty(i)&&(t.length&&(t+="&"),t+=encodeURIComponent(i)+"="+encodeURIComponent(n[i]));return t}(t);return i.length?"?"+i:""}}const ge="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),pe=64,Oe={};let De,Ne=0,Z=0;function Be(n){let t="";do{t=ge[n%pe]+t,n=Math.floor(n/pe)}while(n>0);return t}function xe(){const n=Be(+new Date);return n!==De?(Ne=0,De=n):n+"."+Be(Ne++)}for(;Z<pe;Z++)Oe[ge[Z]]=Z;let He=!1;try{He=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Le=He;function je(n){const t=n.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||Le))return new XMLHttpRequest}catch{}if(!t)try{return new(U[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch{}}function $e(){}const Je=null!=new je({xdomain:!1}).responseType;let Q=(()=>{class n extends N{constructor(i,r){super(),ue(this,r),this.opts=r,this.method=r.method||"GET",this.uri=i,this.data=void 0!==r.data?r.data:null,this.create()}create(){var i;const r=Pe(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this.opts.xd;const c=this.xhr=new je(r);try{c.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){c.setDisableHeaderCheck&&c.setDisableHeaderCheck(!0);for(let m in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(m)&&c.setRequestHeader(m,this.opts.extraHeaders[m])}}catch{}if("POST"===this.method)try{c.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{c.setRequestHeader("Accept","*/*")}catch{}null===(i=this.opts.cookieJar)||void 0===i||i.addCookies(c),"withCredentials"in c&&(c.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(c.timeout=this.opts.requestTimeout),c.onreadystatechange=()=>{var m;3===c.readyState&&(null===(m=this.opts.cookieJar)||void 0===m||m.parseCookies(c)),4===c.readyState&&(200===c.status||1223===c.status?this.onLoad():this.setTimeoutFn(()=>{this.onError("number"==typeof c.status?c.status:0)},0))},c.send(this.data)}catch(m){return void this.setTimeoutFn(()=>{this.onError(m)},0)}typeof document<"u"&&(this.index=n.requestsCount++,n.requests[this.index]=this)}onError(i){this.emitReserved("error",i,this.xhr),this.cleanup(!0)}cleanup(i){if(!(typeof this.xhr>"u"||null===this.xhr)){if(this.xhr.onreadystatechange=$e,i)try{this.xhr.abort()}catch{}typeof document<"u"&&delete n.requests[this.index],this.xhr=null}}onLoad(){const i=this.xhr.responseText;null!==i&&(this.emitReserved("data",i),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}return n.requestsCount=0,n.requests={},n})();function me(){for(let n in Q.requests)Q.requests.hasOwnProperty(n)&&Q.requests[n].abort()}typeof document<"u"&&("function"==typeof attachEvent?attachEvent("onunload",me):"function"==typeof addEventListener&&addEventListener("onpagehide"in U?"pagehide":"unload",me,!1));const Re="function"==typeof Promise&&"function"==typeof Promise.resolve?t=>Promise.resolve().then(t):(t,i)=>i(t,0),ve=U.WebSocket||U.MozWebSocket,ze=typeof navigator<"u"&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),tt={websocket:class Ue extends ce{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),i=this.opts.protocols,r=ze?{}:Pe(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=ze?new ve(t,i,r):i?new ve(t,i):new ve(t)}catch(c){return this.emitReserved("error",c)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let i=0;i<t.length;i++){const c=i===t.length-1;z(t[i],this.supportsBinary,m=>{try{this.ws.send(m)}catch{}c&&Re(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",i=this.query||{};return this.opts.timestampRequests&&(i[this.opts.timestampParam]=xe()),this.supportsBinary||(i.b64=1),this.createUri(t,i)}check(){return!!ve}},webtransport:class et extends ce{get name(){return"webtransport"}doOpen(){"function"==typeof WebTransport&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(t=>{const i=function ae(n,t){G||(G=new TextDecoder);const i=[];let r=0,c=-1,m=!1;return new TransformStream({transform(C,M){for(i.push(C);;){if(0===r){if(j(i)<1)break;const P=V(i,1);m=128==(128&P[0]),c=127&P[0],r=c<126?3:126===c?1:2}else if(1===r){if(j(i)<2)break;const P=V(i,2);c=new DataView(P.buffer,P.byteOffset,P.length).getUint16(0),r=3}else if(2===r){if(j(i)<8)break;const P=V(i,8),ie=new DataView(P.buffer,P.byteOffset,P.length),ee=ie.getUint32(0);if(ee>Math.pow(2,21)-1){M.enqueue(F);break}c=ee*Math.pow(2,32)+ie.getUint32(4),r=3}else{if(j(i)<c)break;const P=V(i,c);M.enqueue(R(m?P:G.decode(P),t)),r=0}if(0===c||c>n){M.enqueue(F);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(i).getReader(),c=function W(){return new TransformStream({transform(n,t){!function Ee(n,t){L&&n.data instanceof Blob?n.data.arrayBuffer().then(ne).then(t):K&&(n.data instanceof ArrayBuffer||B(n.data))?t(ne(n.data)):z(n,!1,i=>{te||(te=new TextEncoder),t(te.encode(i))})}(n,i=>{const r=i.length;let c;if(r<126)c=new Uint8Array(1),new DataView(c.buffer).setUint8(0,r);else if(r<65536){c=new Uint8Array(3);const m=new DataView(c.buffer);m.setUint8(0,126),m.setUint16(1,r)}else{c=new Uint8Array(9);const m=new DataView(c.buffer);m.setUint8(0,127),m.setBigUint64(1,BigInt(r))}n.data&&"string"!=typeof n.data&&(c[0]|=128),t.enqueue(c),t.enqueue(i)})}})}();c.readable.pipeTo(t.writable),this.writer=c.writable.getWriter();const m=()=>{r.read().then(({done:M,value:P})=>{M||(this.onPacket(P),m())}).catch(M=>{})};m();const C={type:"open"};this.query.sid&&(C.data=`{"sid":"${this.query.sid}"}`),this.writer.write(C).then(()=>this.onOpen())})}))}write(t){this.writable=!1;for(let i=0;i<t.length;i++){const c=i===t.length-1;this.writer.write(t[i]).then(()=>{c&&Re(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;null===(t=this.transport)||void 0===t||t.close()}},polling:class de extends ce{constructor(t){if(super(t),this.polling=!1,typeof location<"u"){const r="https:"===location.protocol;let c=location.port;c||(c=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||c!==t.port}this.supportsBinary=Je&&!(t&&t.forceBase64),this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const i=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let r=0;this.polling&&(r++,this.once("pollComplete",function(){--r||i()})),this.writable||(r++,this.once("drain",function(){--r||i()}))}else i()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){((n,t)=>{const i=n.split(J),r=[];for(let c=0;c<i.length;c++){const m=R(i[c],t);if(r.push(m),"error"===m.type)break}return r})(t,this.socket.binaryType).forEach(r=>{if("opening"===this.readyState&&"open"===r.type&&this.onOpen(),"close"===r.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)}),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}doClose(){const t=()=>{this.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}write(t){this.writable=!1,((n,t)=>{const i=n.length,r=new Array(i);let c=0;n.forEach((m,C)=>{z(m,!1,M=>{r[C]=M,++c===i&&t(r.join(J))})})})(t,i=>{this.doWrite(i,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",i=this.query||{};return!1!==this.opts.timestampRequests&&(i[this.opts.timestampParam]=xe()),!this.supportsBinary&&!i.sid&&(i.b64=1),this.createUri(t,i)}request(t={}){return Object.assign(t,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new Q(this.uri(),t)}doWrite(t,i){const r=this.request({method:"POST",data:t});r.on("success",i),r.on("error",(c,m)=>{this.onError("xhr post error",c,m)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(i,r)=>{this.onError("xhr poll error",i,r)}),this.pollXhr=t}}},it=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,st=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ce(n){if(n.length>2e3)throw"URI too long";const t=n,i=n.indexOf("["),r=n.indexOf("]");-1!=i&&-1!=r&&(n=n.substring(0,i)+n.substring(i,r).replace(/:/g,";")+n.substring(r,n.length));let c=it.exec(n||""),m={},C=14;for(;C--;)m[st[C]]=c[C]||"";return-1!=i&&-1!=r&&(m.source=t,m.host=m.host.substring(1,m.host.length-1).replace(/;/g,":"),m.authority=m.authority.replace("[","").replace("]","").replace(/;/g,":"),m.ipv6uri=!0),m.pathNames=function nt(n,t){const r=t.replace(/\/{2,9}/g,"/").split("/");return("/"==t.slice(0,1)||0===t.length)&&r.splice(0,1),"/"==t.slice(-1)&&r.splice(r.length-1,1),r}(0,m.path),m.queryKey=function rt(n,t){const i={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,c,m){c&&(i[c]=m)}),i}(0,m.query),m}let ke=(()=>{class n extends N{constructor(i,r={}){super(),this.binaryType="arraybuffer",this.writeBuffer=[],i&&"object"==typeof i&&(r=i,i=null),i?(i=Ce(i),r.hostname=i.host,r.secure="https"===i.protocol||"wss"===i.protocol,r.port=i.port,i.query&&(r.query=i.query)):r.host&&(r.hostname=Ce(r.host).host),ue(this,r),this.secure=null!=r.secure?r.secure:typeof location<"u"&&"https:"===location.protocol,r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=r.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function we(n){let t={},i=n.split("&");for(let r=0,c=i.length;r<c;r++){let m=i[r].split("=");t[decodeURIComponent(m[0])]=decodeURIComponent(m[1])}return t}(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(i){const r=Object.assign({},this.opts.query);r.EIO=4,r.transport=i,this.id&&(r.sid=this.id);const c=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[i]);return new tt[i](c)}open(){let i;if(this.opts.rememberUpgrade&&n.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))i="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);i=this.transports[0]}this.readyState="opening";try{i=this.createTransport(i)}catch{return this.transports.shift(),void this.open()}i.open(),this.setTransport(i)}setTransport(i){this.transport&&this.transport.removeAllListeners(),this.transport=i,i.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",r=>this.onClose("transport close",r))}probe(i){let r=this.createTransport(i),c=!1;n.priorWebsocketSuccess=!1;const m=()=>{c||(r.send([{type:"ping",data:"probe"}]),r.once("packet",be=>{if(!c)if("pong"===be.type&&"probe"===be.data){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;n.priorWebsocketSuccess="websocket"===r.name,this.transport.pause(()=>{c||"closed"!==this.readyState&&(gt(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const Ae=new Error("probe error");Ae.transport=r.name,this.emitReserved("upgradeError",Ae)}}))};function C(){c||(c=!0,gt(),r.close(),r=null)}const M=be=>{const Ae=new Error("probe error: "+be);Ae.transport=r.name,C(),this.emitReserved("upgradeError",Ae)};function P(){M("transport closed")}function ie(){M("socket closed")}function ee(be){r&&be.name!==r.name&&C()}const gt=()=>{r.removeListener("open",m),r.removeListener("error",M),r.removeListener("close",P),this.off("close",ie),this.off("upgrading",ee)};r.once("open",m),r.once("error",M),r.once("close",P),this.once("close",ie),this.once("upgrading",ee),-1!==this.upgrades.indexOf("webtransport")&&"webtransport"!==i?this.setTimeoutFn(()=>{c||r.open()},200):r.open()}onOpen(){if(this.readyState="open",n.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade){let i=0;const r=this.upgrades.length;for(;i<r;i++)this.probe(this.upgrades[i])}}onPacket(i){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",i),this.emitReserved("heartbeat"),this.resetPingTimeout(),i.type){case"open":this.onHandshake(JSON.parse(i.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const r=new Error("server error");r.code=i.data,this.onError(r);break;case"message":this.emitReserved("data",i.data),this.emitReserved("message",i.data)}}onHandshake(i){this.emitReserved("handshake",i),this.id=i.sid,this.transport.query.sid=i.sid,this.upgrades=this.filterUpgrades(i.upgrades),this.pingInterval=i.pingInterval,this.pingTimeout=i.pingTimeout,this.maxPayload=i.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const i=this.getWritablePackets();this.transport.send(i),this.prevBufferLen=i.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let c=0;c<this.writeBuffer.length;c++){const m=this.writeBuffer[c].data;if(m&&(r+=Xe(m)),c>0&&r>this.maxPayload)return this.writeBuffer.slice(0,c);r+=2}return this.writeBuffer}write(i,r,c){return this.sendPacket("message",i,r,c),this}send(i,r,c){return this.sendPacket("message",i,r,c),this}sendPacket(i,r,c,m){if("function"==typeof r&&(m=r,r=void 0),"function"==typeof c&&(m=c,c=null),"closing"===this.readyState||"closed"===this.readyState)return;(c=c||{}).compress=!1!==c.compress;const C={type:i,data:r,options:c};this.emitReserved("packetCreate",C),this.writeBuffer.push(C),m&&this.once("flush",m),this.flush()}close(){const i=()=>{this.onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),i()},c=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return("opening"===this.readyState||"open"===this.readyState)&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?c():i()}):this.upgrading?c():i()),this}onError(i){n.priorWebsocketSuccess=!1,this.emitReserved("error",i),this.onClose("transport error",i)}onClose(i,r){("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",i,r),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(i){const r=[];let c=0;const m=i.length;for(;c<m;c++)~this.transports.indexOf(i[c])&&r.push(i[c]);return r}}return n.protocol=4,n})();const at="function"==typeof ArrayBuffer,ut=n=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(n):n.buffer instanceof ArrayBuffer,qe=Object.prototype.toString,ft="function"==typeof Blob||typeof Blob<"u"&&"[object BlobConstructor]"===qe.call(Blob),lt="function"==typeof File||typeof File<"u"&&"[object FileConstructor]"===qe.call(File);function H(n){return at&&(n instanceof ArrayBuffer||ut(n))||ft&&n instanceof Blob||lt&&n instanceof File}function ye(n,t){if(!n||"object"!=typeof n)return!1;if(Array.isArray(n)){for(let i=0,r=n.length;i<r;i++)if(ye(n[i]))return!0;return!1}if(H(n))return!0;if(n.toJSON&&"function"==typeof n.toJSON&&1===arguments.length)return ye(n.toJSON(),!0);for(const i in n)if(Object.prototype.hasOwnProperty.call(n,i)&&ye(n[i]))return!0;return!1}function ct(n){const t=[],r=n;return r.data=_e(n.data,t),r.attachments=t.length,{packet:r,buffers:t}}function _e(n,t){if(!n)return n;if(H(n)){const i={_placeholder:!0,num:t.length};return t.push(n),i}if(Array.isArray(n)){const i=new Array(n.length);for(let r=0;r<n.length;r++)i[r]=_e(n[r],t);return i}if("object"==typeof n&&!(n instanceof Date)){const i={};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=_e(n[r],t));return i}return n}function ht(n,t){return n.data=Me(n.data,t),delete n.attachments,n}function Me(n,t){if(!n)return n;if(n&&!0===n._placeholder){if("number"==typeof n.num&&n.num>=0&&n.num<t.length)return t[n.num];throw new Error("illegal attachments")}if(Array.isArray(n))for(let i=0;i<n.length;i++)n[i]=Me(n[i],t);else if("object"==typeof n)for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(n[i]=Me(n[i],t));return n}const f=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],e=5;var s=function(n){return n[n.CONNECT=0]="CONNECT",n[n.DISCONNECT=1]="DISCONNECT",n[n.EVENT=2]="EVENT",n[n.ACK=3]="ACK",n[n.CONNECT_ERROR=4]="CONNECT_ERROR",n[n.BINARY_EVENT=5]="BINARY_EVENT",n[n.BINARY_ACK=6]="BINARY_ACK",n}(s||{});class o{constructor(t){this.replacer=t}encode(t){return t.type!==s.EVENT&&t.type!==s.ACK||!ye(t)?[this.encodeAsString(t)]:this.encodeAsBinary({type:t.type===s.EVENT?s.BINARY_EVENT:s.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id})}encodeAsString(t){let i=""+t.type;return(t.type===s.BINARY_EVENT||t.type===s.BINARY_ACK)&&(i+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(i+=t.nsp+","),null!=t.id&&(i+=t.id),null!=t.data&&(i+=JSON.stringify(t.data,this.replacer)),i}encodeAsBinary(t){const i=ct(t),r=this.encodeAsString(i.packet),c=i.buffers;return c.unshift(r),c}}function a(n){return"[object Object]"===Object.prototype.toString.call(n)}class h extends N{constructor(t){super(),this.reviver=t}add(t){let i;if("string"==typeof t){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");i=this.decodeString(t);const r=i.type===s.BINARY_EVENT;r||i.type===s.BINARY_ACK?(i.type=r?s.EVENT:s.ACK,this.reconstructor=new d(i),0===i.attachments&&super.emitReserved("decoded",i)):super.emitReserved("decoded",i)}else{if(!H(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");i=this.reconstructor.takeBinaryData(t),i&&(this.reconstructor=null,super.emitReserved("decoded",i))}}decodeString(t){let i=0;const r={type:Number(t.charAt(0))};if(void 0===s[r.type])throw new Error("unknown packet type "+r.type);if(r.type===s.BINARY_EVENT||r.type===s.BINARY_ACK){const m=i+1;for(;"-"!==t.charAt(++i)&&i!=t.length;);const C=t.substring(m,i);if(C!=Number(C)||"-"!==t.charAt(i))throw new Error("Illegal attachments");r.attachments=Number(C)}if("/"===t.charAt(i+1)){const m=i+1;for(;++i&&","!==t.charAt(i)&&i!==t.length;);r.nsp=t.substring(m,i)}else r.nsp="/";const c=t.charAt(i+1);if(""!==c&&Number(c)==c){const m=i+1;for(;++i;){const C=t.charAt(i);if(null==C||Number(C)!=C){--i;break}if(i===t.length)break}r.id=Number(t.substring(m,i+1))}if(t.charAt(++i)){const m=this.tryParse(t.substr(i));if(!h.isPayloadValid(r.type,m))throw new Error("invalid payload");r.data=m}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,i){switch(t){case s.CONNECT:return a(i);case s.DISCONNECT:return void 0===i;case s.CONNECT_ERROR:return"string"==typeof i||a(i);case s.EVENT:case s.BINARY_EVENT:return Array.isArray(i)&&("number"==typeof i[0]||"string"==typeof i[0]&&-1===f.indexOf(i[0]));case s.ACK:case s.BINARY_ACK:return Array.isArray(i)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class d{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const i=ht(this.reconPack,this.buffers);return this.finishedReconstruction(),i}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function u(n,t,i){return n.on(t,i),function(){n.off(t,i)}}const p=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class y extends N{constructor(t,i,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=i,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[u(t,"open",this.onopen.bind(this)),u(t,"packet",this.onpacket.bind(this)),u(t,"error",this.onerror.bind(this)),u(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...i){if(p.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(i.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(i),this;const r={type:s.EVENT,data:i,options:{}};if(r.options.compress=!1!==this.flags.compress,"function"==typeof i[i.length-1]){const C=this.ids++,M=i.pop();this._registerAckCallback(C,M),r.id=C}return this.flags.volatile&&(!(this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable)||!this.connected)||(this.connected?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(t,i){var r;const c=null!==(r=this.flags.timeout)&&void 0!==r?r:this._opts.ackTimeout;if(void 0===c)return void(this.acks[t]=i);const m=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let M=0;M<this.sendBuffer.length;M++)this.sendBuffer[M].id===t&&this.sendBuffer.splice(M,1);i.call(this,new Error("operation has timed out"))},c),C=(...M)=>{this.io.clearTimeoutFn(m),i.apply(this,M)};C.withError=!0,this.acks[t]=C}emitWithAck(t,...i){return new Promise((r,c)=>{const m=(C,M)=>C?c(C):r(M);m.withError=!0,i.push(m),this.emit(t,...i)})}_addToQueue(t){let i;"function"==typeof t[t.length-1]&&(i=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((c,...m)=>r!==this._queue[0]?void 0:(null!==c?r.tryCount>this._opts.retries&&(this._queue.shift(),i&&i(c)):(this._queue.shift(),i&&i(null,...m)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||0===this._queue.length)return;const i=this._queue[0];i.pending&&!t||(i.pending=!0,i.tryCount++,this.flags=i.flags,this.emit.apply(this,i.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){"function"==typeof this.auth?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:s.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,i){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,i),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(r=>String(r.id)===t)){const r=this.acks[t];delete this.acks[t],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case s.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case s.EVENT:case s.BINARY_EVENT:this.onevent(t);break;case s.ACK:case s.BINARY_ACK:this.onack(t);break;case s.DISCONNECT:this.ondisconnect();break;case s.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r)}}onevent(t){const i=t.data||[];null!=t.id&&i.push(this.ack(t.id)),this.connected?this.emitEvent(i):this.receiveBuffer.push(Object.freeze(i))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const i=this._anyListeners.slice();for(const r of i)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&"string"==typeof t[t.length-1]&&(this._lastOffset=t[t.length-1])}ack(t){const i=this;let r=!1;return function(...c){r||(r=!0,i.packet({type:s.ACK,id:t,data:c}))}}onack(t){const i=this.acks[t.id];"function"==typeof i&&(delete this.acks[t.id],i.withError&&t.data.unshift(null),i.apply(this,t.data))}onconnect(t,i){this.id=t,this.recovered=i&&this._pid===i,this._pid=i,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:s.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const i=this._anyListeners;for(let r=0;r<i.length;r++)if(t===i[r])return i.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const i=this._anyOutgoingListeners;for(let r=0;r<i.length;r++)if(t===i[r])return i.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const i=this._anyOutgoingListeners.slice();for(const r of i)r.apply(this,t.data)}}}function v(n){this.ms=(n=n||{}).min||100,this.max=n.max||1e4,this.factor=n.factor||2,this.jitter=n.jitter>0&&n.jitter<=1?n.jitter:0,this.attempts=0}v.prototype.duration=function(){var n=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),i=Math.floor(t*this.jitter*n);n=1&Math.floor(10*t)?n+i:n-i}return 0|Math.min(n,this.max)},v.prototype.reset=function(){this.attempts=0},v.prototype.setMin=function(n){this.ms=n},v.prototype.setMax=function(n){this.max=n},v.prototype.setJitter=function(n){this.jitter=n};class S extends N{constructor(t,i){var r;super(),this.nsps={},this.subs=[],t&&"object"==typeof t&&(i=t,t=void 0),(i=i||{}).path=i.path||"/socket.io",this.opts=i,ue(this,i),this.reconnection(!1!==i.reconnection),this.reconnectionAttempts(i.reconnectionAttempts||1/0),this.reconnectionDelay(i.reconnectionDelay||1e3),this.reconnectionDelayMax(i.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(r=i.randomizationFactor)&&void 0!==r?r:.5),this.backoff=new v({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==i.timeout?2e4:i.timeout),this._readyState="closed",this.uri=t;const c=i.parser||g;this.encoder=new c.Encoder,this.decoder=new c.Decoder,this._autoConnect=!1!==i.autoConnect,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var i;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null===(i=this.backoff)||void 0===i||i.setMin(t),this)}randomizationFactor(t){var i;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null===(i=this.backoff)||void 0===i||i.setJitter(t),this)}reconnectionDelayMax(t){var i;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null===(i=this.backoff)||void 0===i||i.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new ke(this.uri,this.opts);const i=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const c=u(i,"open",function(){r.onopen(),t&&t()}),m=M=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",M),t?t(M):this.maybeReconnectOnOpen()},C=u(i,"error",m);if(!1!==this._timeout){const P=this.setTimeoutFn(()=>{c(),m(new Error("timeout")),i.close()},this._timeout);this.opts.autoUnref&&P.unref(),this.subs.push(()=>{this.clearTimeoutFn(P)})}return this.subs.push(c),this.subs.push(C),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(u(t,"ping",this.onping.bind(this)),u(t,"data",this.ondata.bind(this)),u(t,"error",this.onerror.bind(this)),u(t,"close",this.onclose.bind(this)),u(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(i){this.onclose("parse error",i)}}ondecoded(t){Re(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,i){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new y(this,t,i),this.nsps[t]=r),r}_destroy(t){const i=Object.keys(this.nsps);for(const r of i)if(this.nsps[r].active)return;this._close()}_packet(t){const i=this.encoder.encode(t);for(let r=0;r<i.length;r++)this.engine.write(i[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,i){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,i),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const i=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(c=>{c?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",c)):t.onreconnect()}))},i);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const D={};function E(n,t){"object"==typeof n&&(t=n,n=void 0);const i=function ot(n,t="",i){let r=n;i=i||typeof location<"u"&&location,null==n&&(n=i.protocol+"//"+i.host),"string"==typeof n&&("/"===n.charAt(0)&&(n="/"===n.charAt(1)?i.protocol+n:i.host+n),/^(https?|wss?):\/\//.test(n)||(n=typeof i<"u"?i.protocol+"//"+n:"https://"+n),r=Ce(n)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const m=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+m+":"+r.port+t,r.href=r.protocol+"://"+m+(i&&i.port===r.port?"":":"+r.port),r}(n,(t=t||{}).path||"/socket.io"),r=i.source,c=i.id;let P;return t.forceNew||t["force new connection"]||!1===t.multiplex||D[c]&&i.path in D[c].nsps?P=new S(r,t):(D[c]||(D[c]=new S(r,t)),P=D[c]),i.query&&!t.query&&(t.query=i.queryKey),P.socket(i.path,t)}Object.assign(E,{Manager:S,Socket:y,io:E,connect:E});var k=O(9947),T=O(4946),x=O(8889);let _=(()=>{class n{constructor(i){this.commonService=i}connectWithSocket(i,r){this.socket=E(k.N.socketApi,{auth:{username:i,employeeId:r}}),this.socket.on("checkInnotification",c=>{console.log("Notification received: ",c),this.commonService.notificationBooleanSubject.next(!0),c.employeeName=i,this.commonService.notificationMessage.next(c)}),this.socket.on("checkOutnotification",c=>{console.log("Notification received: ",c),this.commonService.notificationBooleanSubject.next(!0),c.employeeName=i,this.commonService.notificationMessage.next(c)}),this.socket.on("leaveApproval",c=>{console.log("Notification received: ",c),this.commonService.notificationBooleanSubject.next(!0),c.employeeName=i,this.commonService.notificationMessage.next(c)}),this.socket.on("disconnect",c=>{console.log("Disconnected: ",c)})}disconnectSocket(){this.socket&&(this.socket.disconnect(),console.log("Socket disconnected"))}ngOnDestroy(){this.disconnectSocket()}static#e=this.\u0275fac=function(r){return new(r||n)(T.LFG(x.R))};static#t=this.\u0275prov=T.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})()}}]);